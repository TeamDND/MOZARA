================================================================================
ConvNeXt+ViT Ensemble Test (Level 1-7) - Test #5
================================================================================
테스트 일시: 2025-09-25 13:35:54
테스트 데이터: C:\Users\301\Desktop\classification_test
대상 레벨: Level 1-7 (총 7개 클래스)
인덱스: ConvNeXt='hair-loss-rag-analyzer', ViT='hair-loss-vit-s16'
파라미터: top_k=10, Tconv=0.15, Tvit=0.2, override=True

📊 전체 결과
----------------------------------------
총 테스트 수: 140
정확도 (Accuracy): 0.543
정밀도 (Precision): 0.622
재현율 (Recall): 0.543
F1-Score: 0.538

📁 레벨별 테스트 파일 수
----------------------------------------
레벨 1: 20개 파일
레벨 2: 20개 파일
레벨 3: 20개 파일
레벨 4: 20개 파일
레벨 5: 20개 파일
레벨 6: 20개 파일
레벨 7: 20개 파일

🎯 클래스별 성능 (Level 1-7)
----------------------------------------
레벨 1: 정밀도=0.800, 재현율=0.400, F1=0.533
레벨 2: 정밀도=0.381, 재현율=0.800, F1=0.516
레벨 3: 정밀도=0.857, 재현율=0.300, F1=0.444
레벨 4: 정밀도=0.750, 재현율=0.600, F1=0.667
레벨 5: 정밀도=0.533, 재현율=0.400, F1=0.457
레벨 6: 정밀도=0.417, 재현율=0.500, F1=0.455
레벨 7: 정밀도=0.615, 재현율=0.800, F1=0.696

📐 뷰포인트별 통계 (전체)
----------------------------------------
right: 12/18 (0.667)
left: 19/31 (0.613)
top-down: 26/40 (0.650)
front: 14/42 (0.333)
back: 5/9 (0.556)

🎯 주요 뷰포인트 상세 성능 (Right, Left, Top-down, Front, Back)
----------------------------------------
RIGHT:
  정확도 (Accuracy): 0.667
  정밀도 (Precision): 0.556
  재현율 (Recall): 0.667
  F1-Score: 0.583
  테스트 수: 18개

LEFT:
  정확도 (Accuracy): 0.613
  정밀도 (Precision): 0.597
  재현율 (Recall): 0.613
  F1-Score: 0.581
  테스트 수: 31개

TOP-DOWN:
  정확도 (Accuracy): 0.650
  정밀도 (Precision): 0.748
  재현율 (Recall): 0.650
  F1-Score: 0.656
  테스트 수: 40개

FRONT:
  정확도 (Accuracy): 0.333
  정밀도 (Precision): 0.486
  재현율 (Recall): 0.333
  F1-Score: 0.319
  테스트 수: 42개

BACK:
  정확도 (Accuracy): 0.556
  정밀도 (Precision): 1.000
  재현율 (Recall): 0.556
  F1-Score: 0.667
  테스트 수: 9개

🚨 2단계 이상 편차 분석
----------------------------------------
총 큰 편차 케이스: 19개
전체 테스트 대비 비율: 13.6%

편차별 발생 건수:
  2단계 편차: 9건
  3단계 편차: 5건
  4단계 편차: 5건

뷰포인트별 큰 편차 발생:
  front: 10건
  left: 5건
  top-down: 4건

큰 편차 케이스 상세 (편차 >= 2):
  1. 21-Front_jpg.rf.1dcd2eef5acfbccfa3e3a939a040d594.jpg | 정답:2 → 예측:5 (편차:3) | front
  2. 21-Front_jpg.rf.1fbb2566f3edeed5e8ea35e8fa5e36d5.jpg | 정답:2 → 예측:6 (편차:4) | front
  3. 17-Front_jpg.rf.4572009f1e7ce5a229e4d1a677d2ef62.jpg | 정답:3 → 예측:7 (편차:4) | front
  4. 23-Left_jpg.rf.53456665e57a2bb799e3deaab1f38340.jpg | 정답:3 → 예측:5 (편차:2) | left
  5. 23-Left_jpg.rf.b0bda4a8339f7630de250636ee4210b5.jpg | 정답:3 → 예측:5 (편차:2) | left
  6. 10-Front_jpg.rf.8d5a525c907a916b48ca9cf936359734.jpg | 정답:4 → 예측:6 (편차:2) | front
  7. 14-Top-Down_jpg.rf.187e34f31103c42d846c7413a2a02871.jpg | 정답:4 → 예측:1 (편차:3) | top-down
  8. 29-Left_jpg.rf.58ec6830e002ce7b7290212c68db2fdf.jpg | 정답:4 → 예측:6 (편차:2) | left
  9. 29-Left_jpg.rf.8f92a49a4698d2856f05b9c2d41e5a8f.jpg | 정답:4 → 예측:6 (편차:2) | left
  10. 37-Front_jpg.rf.7bc9747d319dac74eda1d8d43d48dc4b.jpg | 정답:4 → 예측:2 (편차:2) | front
  ... 외 9건

🔍 큰 편차 발생 원인 분석:
  - Front 뷰포인트: 정면 촬영시 헤어라인 판단의 어려움
  - 조명/각도: 그림자나 각도로 인한 탈모 정도 오인식
  - 헤어스타일: 스타일링으로 인한 실제 탈모 정도 은폐
  - 이미지 품질: 해상도나 선명도 부족으로 인한 오판

📊 4단계 노우드 분류 성능
----------------------------------------
4단계 정확도: 0.693
4단계 정밀도: 0.707
4단계 재현율: 0.693
4단계 F1-Score: 0.682

4단계별 상세 성능:
  0단계(Lv1): 정밀도=0.800, 재현율=0.400, F1=0.533
  1단계(Lv2-3): 정밀도=0.612, 재현율=0.750, F1=0.674
  2단계(Lv4-5): 정밀도=0.742, 재현율=0.575, F1=0.648
  3단계(Lv6-7): 정밀도=0.720, 재현율=0.900, F1=0.800

⚖️ 앙상블 가중치 설정
----------------------------------------
Per-class weights (ConvNeXt/ViT):
  레벨 1: 0.502 / 0.498
  레벨 2: 0.529 / 0.471
  레벨 3: 0.508 / 0.492
  레벨 4: 0.498 / 0.502
  레벨 5: 0.500 / 0.500
  레벨 6: 0.522 / 0.478
  레벨 7: 0.500 / 0.500

강점 모델 마스크:
  ConvNeXt 강점: [2, 6]
  ViT 강점: []

오버라이드 임계값 (τ):
  ConvNeXt: ['레벨2:0.70', '레벨6:0.55']
  ViT: None
