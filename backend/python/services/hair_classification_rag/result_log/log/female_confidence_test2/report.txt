================================================================================
Female Hair Loss - Confidence-Weighted Ensemble Test - Test #2
================================================================================
테스트 일시: 2025-10-01 15:25:43
테스트 데이터: C:\Users\301\Desktop\female_classification\test\selected_test
대상 스테이지: Stage 1-5 (총 5개 클래스)
인덱스: ConvNeXt='hair-loss-rag-analyzer', ViT='hair-loss-vit-s16'
파라미터: top_k=10, Tconv=0.15, Tvit=0.2
앙상블 방식: 신뢰도 기반 동적 가중치 (Confidence-Weighted)
필터: gender=female

📊 전체 결과
----------------------------------------
총 테스트 수: 100
정확도 (Accuracy): 0.650
정밀도 (Precision): 0.705
재현율 (Recall): 0.650
F1-Score: 0.647
총 소요 시간: 117.65초
이미지당 평균 시간: 1176.5ms

📁 스테이지별 테스트 파일 수
----------------------------------------
Stage 1: 20개 파일
Stage 2: 20개 파일
Stage 3: 20개 파일
Stage 4: 20개 파일
Stage 5: 20개 파일

🎯 클래스별 성능 (Stage 1-5)
----------------------------------------
Stage 1: 정밀도=0.538, 재현율=0.700, F1=0.609, Support=20.0
Stage 2: 정밀도=0.500, 재현율=0.700, F1=0.583, Support=20.0
Stage 3: 정밀도=0.778, 재현율=0.350, F1=0.483, Support=20.0
Stage 4: 정밀도=1.000, 재현율=0.650, F1=0.788, Support=20.0
Stage 5: 정밀도=0.708, 재현율=0.850, F1=0.773, Support=20.0

⏱️ 단계별 처리 시간 통계 (밀리초)
----------------------------------------
Step                 Mean       Std        Min        Max       
----------------------------------------
Image Loading        2.08       1.28       0.78       11.48     
ViT Embedding        42.83      7.40       31.84      59.33     
ConvNeXt Embedding   675.63     59.02      591.16     1030.84   
ViT Search           229.93     69.43      216.09     917.98    
ConvNeXt Search      225.71     81.59      205.14     1035.95   
KNN Probability      0.25       0.14       0.10       0.51      
Ensemble             0.08       0.05       0.03       0.15      
----------------------------------------
Total Pipeline       1176.50   

⚖️ 신뢰도 기반 동적 가중치 정보
----------------------------------------
방식: 각 모델의 최대 확률값을 신뢰도로 사용하여 동적 가중치 계산
공식: w_model = conf_model / (conf_conv + conf_vit)

평균 ConvNeXt 가중치: 0.429
평균 ViT 가중치: 0.571
평균 ConvNeXt 신뢰도: 0.535
평균 ViT 신뢰도: 0.720

💡 장점
----------------------------------------
✓ Per-class 가중치 최적화 불필요 (시간 절약)
✓ 이미지별 동적 가중치 조정
✓ 더 확신하는 모델에 자동으로 높은 가중치 부여
✓ 간단한 구현으로 안정적인 성능
