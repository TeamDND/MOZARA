================================================================================
Female Hair Loss - Confidence-Weighted Ensemble Test - Test #1
================================================================================
테스트 일시: 2025-10-01 12:39:04
테스트 데이터: C:\Users\301\Desktop\female_classification\test\selected_test
대상 스테이지: Stage 1-5 (총 5개 클래스)
인덱스: ConvNeXt='hair-loss-rag-analyzer', ViT='hair-loss-vit-s16'
파라미터: top_k=10, Tconv=0.15, Tvit=0.2
앙상블 방식: 신뢰도 기반 동적 가중치 (Confidence-Weighted)
필터: gender=female

📊 전체 결과
----------------------------------------
총 테스트 수: 100
정확도 (Accuracy): 0.230
정밀도 (Precision): 0.334
재현율 (Recall): 0.230
F1-Score: 0.210
총 소요 시간: 132.44초
이미지당 평균 시간: 1324.4ms

📁 스테이지별 테스트 파일 수
----------------------------------------
Stage 1: 20개 파일
Stage 2: 20개 파일
Stage 3: 20개 파일
Stage 4: 20개 파일
Stage 5: 20개 파일

🎯 클래스별 성능 (Stage 1-5)
----------------------------------------
Stage 1: 정밀도=0.226, 재현율=0.600, F1=0.329, Support=20.0
Stage 2: 정밀도=0.111, 재현율=0.100, F1=0.105, Support=20.0
Stage 3: 정밀도=0.500, 재현율=0.200, F1=0.286, Support=20.0
Stage 4: 정밀도=0.167, 재현율=0.150, F1=0.158, Support=20.0
Stage 5: 정밀도=0.667, 재현율=0.100, F1=0.174, Support=20.0

⏱️ 단계별 처리 시간 통계 (밀리초)
----------------------------------------
Step                 Mean       Std        Min        Max       
----------------------------------------
Image Loading        13.03      7.00       6.62       41.83     
ViT Embedding        49.53      11.06      30.60      97.43     
ConvNeXt Embedding   807.85     80.15      679.49     1030.39   
ViT Search           228.44     74.33      211.25     936.97    
ConvNeXt Search      225.14     78.82      205.04     984.59    
KNN Probability      0.23       0.14       0.10       0.71      
Ensemble             0.08       0.05       0.03       0.21      
----------------------------------------
Total Pipeline       1324.29   

⚖️ 신뢰도 기반 동적 가중치 정보
----------------------------------------
방식: 각 모델의 최대 확률값을 신뢰도로 사용하여 동적 가중치 계산
공식: w_model = conf_model / (conf_conv + conf_vit)

평균 ConvNeXt 가중치: 0.314
평균 ViT 가중치: 0.686
평균 ConvNeXt 신뢰도: 0.466
평균 ViT 신뢰도: 1.000

💡 장점
----------------------------------------
✓ Per-class 가중치 최적화 불필요 (시간 절약)
✓ 이미지별 동적 가중치 조정
✓ 더 확신하는 모델에 자동으로 높은 가중치 부여
✓ 간단한 구현으로 안정적인 성능
