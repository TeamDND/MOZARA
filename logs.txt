2025-10-14T02:28:01.457203536Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:28:01.457265774Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:28:01.765870942Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:28:01.765901780Z Hair Change 모듈 로드 성공
2025-10-14T02:28:05.854141761Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:28:05.854179012Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:28:10.662479450Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:28:10.662502654Z   warnings.warn(
2025-10-14T02:28:10.662505128Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:11.886113465Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:28:11.972528909Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:11.972542805Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:28:11.972819501Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:28:11.972830321Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:28:11.972834199Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:12.037013834Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:28:12.037036327Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:28:12.037068849Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:28:16.931864011Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:17.947041797Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:28:18.031158293Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:18.031189482Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:28:18.031358093Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:28:18.031365487Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:28:18.031368683Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:18.092435694Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:28:18.092461683Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:28:18.092471351Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:28:22.042169585Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:22.729629469Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:28:22.797972484Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:22.797996911Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:28:22.798308453Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:28:22.798315646Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:28:22.798318802Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:22.859100421Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:28:22.859129366Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:28:22.876602666Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:28:22.877059143Z Traceback (most recent call last):
2025-10-14T02:28:22.877070846Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:28:22.877079943Z     sys.exit(main())
2025-10-14T02:28:22.877096705Z              ^^^^^^
2025-10-14T02:28:22.877099530Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:28:22.877365516Z     return self.main(*args, **kwargs)
2025-10-14T02:28:22.877372439Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.877375434Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:28:22.877579793Z     rv = self.invoke(ctx)
2025-10-14T02:28:22.877586656Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.877590022Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:28:22.877771136Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:28:22.877781927Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.877785043Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:28:22.877935198Z     return callback(*args, **kwargs)
2025-10-14T02:28:22.877941981Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.877945147Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:28:22.878002716Z     run(
2025-10-14T02:28:22.878006203Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:28:22.878134176Z     server.run()
2025-10-14T02:28:22.878137102Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:28:22.878174262Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:28:22.878207886Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.878210621Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:28:22.878261768Z     return runner.run(main)
2025-10-14T02:28:22.878273150Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.878275705Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:28:22.878344365Z     return self._loop.run_until_complete(task)
2025-10-14T02:28:22.878361007Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.878368101Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:28:22.878503989Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:28:22.878553112Z     await self._serve(sockets)
2025-10-14T02:28:22.878568251Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:28:22.878622353Z     config.load()
2025-10-14T02:28:22.878630920Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:28:22.878759674Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:28:22.878766748Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.878769183Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:28:22.878814569Z     module = importlib.import_module(module_str)
2025-10-14T02:28:22.878831511Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.878834276Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:28:22.878899741Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:28:22.878931040Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.878957260Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:28:22.878960797Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:28:22.878964223Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:28:22.878966738Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:28:22.878969132Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:28:22.878971427Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:28:22.878973741Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:28:22.879163632Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:28:22.879184311Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:28:22.879286896Z     from ..services.rag_service import rag_service
2025-10-14T02:28:22.879293789Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:28:22.879333856Z     from .pinecone_service import pinecone_service
2025-10-14T02:28:22.879344225Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:28:22.879448774Z     pinecone_service = PineconeService()
2025-10-14T02:28:22.879455807Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:28:22.879458793Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:28:22.879525209Z     self._initialize_client()
2025-10-14T02:28:22.879543935Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:28:22.879564464Z     raise e
2025-10-14T02:28:22.879569022Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:28:22.879631731Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:28:22.879637993Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:28:25.904201568Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:28:25.904229371Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:28:26.204920491Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:28:26.204959415Z Hair Change 모듈 로드 성공
2025-10-14T02:28:30.199831422Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:28:30.199873171Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:28:30.268576421Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:28:30.268596079Z   warnings.warn(
2025-10-14T02:28:30.268600617Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:31.496130164Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:28:31.581959455Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:31.581976307Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:28:31.582275395Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:28:31.582282889Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:28:31.582291886Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:31.643735933Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:28:31.643775709Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:28:31.643811818Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:28:31.683931678Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:32.699474347Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:28:32.782825219Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:32.782837302Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:28:32.783065135Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:28:32.783070695Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:28:32.783093168Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:32.844483814Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:28:32.844528689Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:28:32.844566751Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:28:32.890957717Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:33.580992683Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:28:33.649080013Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:33.649090954Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:28:33.649367849Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:28:33.649375895Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:28:33.649379241Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:33.711657083Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:28:33.711671540Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:28:33.728403472Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:28:33.728835863Z Traceback (most recent call last):
2025-10-14T02:28:33.728840793Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:28:33.728897130Z     sys.exit(main())
2025-10-14T02:28:33.728921386Z              ^^^^^^
2025-10-14T02:28:33.728924502Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:28:33.729117048Z     return self.main(*args, **kwargs)
2025-10-14T02:28:33.729125063Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.729127558Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:28:33.729315825Z     rv = self.invoke(ctx)
2025-10-14T02:28:33.729319192Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.729321566Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:28:33.729490257Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:28:33.729503943Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.729506488Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:28:33.729635272Z     return callback(*args, **kwargs)
2025-10-14T02:28:33.729637917Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.729640422Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:28:33.729752024Z     run(
2025-10-14T02:28:33.729757735Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:28:33.729853587Z     server.run()
2025-10-14T02:28:33.729856473Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:28:33.729942947Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:28:33.729958296Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.729961512Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:28:33.729990066Z     return runner.run(main)
2025-10-14T02:28:33.729994605Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.729997220Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:28:33.730061031Z     return self._loop.run_until_complete(task)
2025-10-14T02:28:33.730068385Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.730070980Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:28:33.730164668Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:28:33.730203863Z     await self._serve(sockets)
2025-10-14T02:28:33.730218751Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:28:33.730280348Z     config.load()
2025-10-14T02:28:33.730288944Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:28:33.730364147Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:28:33.730377252Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.730381520Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:28:33.730419723Z     module = importlib.import_module(module_str)
2025-10-14T02:28:33.730430143Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.730432687Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:28:33.730497420Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:28:33.730511016Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.730514222Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:28:33.730517549Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:28:33.730532667Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:28:33.730537406Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:28:33.730540352Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:28:33.730543468Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:28:33.730546734Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:28:33.730744460Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:28:33.730754869Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:28:33.730830854Z     from ..services.rag_service import rag_service
2025-10-14T02:28:33.730835843Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:28:33.730889806Z     from .pinecone_service import pinecone_service
2025-10-14T02:28:33.730892671Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:28:33.730963566Z     pinecone_service = PineconeService()
2025-10-14T02:28:33.730967584Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:28:33.730970619Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:28:33.731018821Z     self._initialize_client()
2025-10-14T02:28:33.731021737Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:28:33.731084025Z     raise e
2025-10-14T02:28:33.731088794Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:28:33.731125574Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:28:33.731142726Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:28:41.666639908Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:28:41.666673982Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:28:41.970885802Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:28:41.970914958Z Hair Change 모듈 로드 성공
2025-10-14T02:28:45.977165665Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:28:45.977195952Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:28:46.043927686Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:28:46.043943647Z   warnings.warn(
2025-10-14T02:28:46.043952593Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:47.261768363Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:28:47.347419966Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:47.347447659Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:28:47.347746487Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:28:47.347761455Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:28:47.347764581Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:47.410740639Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:28:47.410763603Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:28:47.410789472Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:28:47.445532295Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:48.459523096Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:28:48.541816679Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:48.541834944Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:28:48.542080921Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:28:48.542092333Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:28:48.542097272Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:48.603558732Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:28:48.603577197Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:28:48.603591174Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:28:48.649671299Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:28:49.335823387Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:28:49.403001900Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:28:49.403029453Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:28:49.403253569Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:28:49.403268046Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:28:49.403289938Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:28:49.465362559Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:28:49.465385713Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:28:49.482235589Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:28:49.482679733Z Traceback (most recent call last):
2025-10-14T02:28:49.482696585Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:28:49.482700011Z     sys.exit(main())
2025-10-14T02:28:49.482702987Z              ^^^^^^
2025-10-14T02:28:49.482705401Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:28:49.482996635Z     return self.main(*args, **kwargs)
2025-10-14T02:28:49.483019699Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.483025600Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:28:49.483139626Z     rv = self.invoke(ctx)
2025-10-14T02:28:49.483147932Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.483151038Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:28:49.483304680Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:28:49.483312625Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.483315872Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:28:49.483448634Z     return callback(*args, **kwargs)
2025-10-14T02:28:49.483452090Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.483454405Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:28:49.483506724Z     run(
2025-10-14T02:28:49.483509569Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:28:49.483607526Z     server.run()
2025-10-14T02:28:49.483610762Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:28:49.483661057Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:28:49.483734817Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.483760446Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:28:49.483767079Z     return runner.run(main)
2025-10-14T02:28:49.483774062Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.483778721Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:28:49.483834326Z     return self._loop.run_until_complete(task)
2025-10-14T02:28:49.483847943Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.483854024Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:28:49.483944466Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:28:49.483982929Z     await self._serve(sockets)
2025-10-14T02:28:49.483988770Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:28:49.484040589Z     config.load()
2025-10-14T02:28:49.484047171Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:28:49.484137292Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:28:49.484142983Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.484147612Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:28:49.484191746Z     module = importlib.import_module(module_str)
2025-10-14T02:28:49.484197136Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.484201684Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:28:49.484284542Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:28:49.484304370Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.484309640Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:28:49.484314138Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:28:49.484318597Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:28:49.484323005Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:28:49.484327824Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:28:49.484332293Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:28:49.484344596Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:28:49.484503127Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:28:49.484508788Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:28:49.484581666Z     from ..services.rag_service import rag_service
2025-10-14T02:28:49.484587247Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:28:49.484645027Z     from .pinecone_service import pinecone_service
2025-10-14T02:28:49.484650928Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:28:49.484726492Z     pinecone_service = PineconeService()
2025-10-14T02:28:49.484738144Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:28:49.484742843Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:28:49.484784582Z     self._initialize_client()
2025-10-14T02:28:49.484790483Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:28:49.484842903Z     raise e
2025-10-14T02:28:49.484848383Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:28:49.484898569Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:28:49.484903929Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:28:57.430828212Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:28:57.430848381Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:28:57.736620675Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:28:57.736633610Z Hair Change 모듈 로드 성공
2025-10-14T02:29:01.751843339Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:01.751864209Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:29:01.817829687Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:29:01.817848242Z   warnings.warn(
2025-10-14T02:29:01.817867138Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:03.043329828Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:29:03.129474779Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:03.129486270Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:29:03.129790408Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:03.129802391Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:29:03.129829452Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:03.192235036Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:29:03.192270444Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:03.192310400Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:29:03.233642573Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:04.245852109Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:29:04.329406768Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:04.329420935Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:29:04.329641194Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:04.329645171Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:29:04.329648017Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:04.390992575Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:29:04.391004828Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:04.391054072Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:29:04.430739526Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:05.112733344Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:29:05.180598802Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:05.180610053Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:29:05.180881479Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:05.180894504Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:29:05.180939770Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:05.243457628Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:29:05.243468508Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:29:05.259924355Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:29:05.260346778Z Traceback (most recent call last):
2025-10-14T02:29:05.260353330Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:29:05.260365102Z     sys.exit(main())
2025-10-14T02:29:05.260368870Z              ^^^^^^
2025-10-14T02:29:05.260372547Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:29:05.260664782Z     return self.main(*args, **kwargs)
2025-10-14T02:29:05.260680321Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.260683297Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:29:05.260838943Z     rv = self.invoke(ctx)
2025-10-14T02:29:05.260850825Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.260853601Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:29:05.260995470Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:29:05.261000901Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261003676Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:29:05.261132431Z     return callback(*args, **kwargs)
2025-10-14T02:29:05.261137801Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261140676Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:29:05.261234585Z     run(
2025-10-14T02:29:05.261242970Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:29:05.261335136Z     server.run()
2025-10-14T02:29:05.261344083Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:29:05.261360905Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:29:05.261395621Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261403025Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:29:05.261440556Z     return runner.run(main)
2025-10-14T02:29:05.261447549Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261450545Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:29:05.261498897Z     return self._loop.run_until_complete(task)
2025-10-14T02:29:05.261511651Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261514667Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:29:05.261611120Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:29:05.261652949Z     await self._serve(sockets)
2025-10-14T02:29:05.261668870Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:29:05.261735096Z     config.load()
2025-10-14T02:29:05.261745545Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:29:05.261837119Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:29:05.261842179Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261844584Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:29:05.261894499Z     module = importlib.import_module(module_str)
2025-10-14T02:29:05.261902864Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261906171Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:29:05.261955605Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:29:05.261984199Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.261990561Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:29:05.261993407Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:29:05.261996072Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:29:05.261998606Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:29:05.262001151Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:29:05.262003666Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:29:05.262009828Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:29:05.262220368Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:29:05.262227461Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:29:05.262278638Z     from ..services.rag_service import rag_service
2025-10-14T02:29:05.262283658Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:29:05.262347970Z     from .pinecone_service import pinecone_service
2025-10-14T02:29:05.262352930Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:29:05.262415218Z     pinecone_service = PineconeService()
2025-10-14T02:29:05.262419396Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:29:05.262422411Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:29:05.262479250Z     self._initialize_client()
2025-10-14T02:29:05.262483628Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:29:05.262531218Z     raise e
2025-10-14T02:29:05.262535256Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:29:05.262586964Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:29:05.262601772Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:29:13.198464037Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:29:13.198494976Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:29:13.498695514Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:29:13.498762271Z Hair Change 모듈 로드 성공
2025-10-14T02:29:17.484557471Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:17.484593099Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:29:17.547880699Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:29:17.547902991Z   warnings.warn(
2025-10-14T02:29:17.547907971Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:18.773527258Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:29:18.862586215Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:18.862615070Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:29:18.862618747Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:18.862621552Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:29:18.862627283Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:18.924086148Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:29:18.924131996Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:18.924161652Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:29:18.970230615Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:19.994220455Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:29:20.076846088Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:20.076865135Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:29:20.077164904Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:20.077172388Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:29:20.077175585Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:20.138815193Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:29:20.138830212Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:20.138834080Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:29:20.186805027Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:20.867975159Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:29:20.935751769Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:20.935766377Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:29:20.936117584Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:20.936124587Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:29:20.936127833Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:20.998682260Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:29:20.998695205Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:29:21.015375148Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:29:21.015831515Z Traceback (most recent call last):
2025-10-14T02:29:21.015842656Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:29:21.015870599Z     sys.exit(main())
2025-10-14T02:29:21.015873815Z              ^^^^^^
2025-10-14T02:29:21.015878093Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:29:21.016120674Z     return self.main(*args, **kwargs)
2025-10-14T02:29:21.016126255Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.016128699Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:29:21.016315895Z     rv = self.invoke(ctx)
2025-10-14T02:29:21.016321716Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.016324141Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:29:21.016469056Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:29:21.016471781Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.016473855Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:29:21.016625273Z     return callback(*args, **kwargs)
2025-10-14T02:29:21.016630784Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.016633178Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:29:21.016681119Z     run(
2025-10-14T02:29:21.016684145Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:29:21.016789545Z     server.run()
2025-10-14T02:29:21.016796358Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:29:21.016860039Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:29:21.016880157Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.016882502Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:29:21.016921215Z     return runner.run(main)
2025-10-14T02:29:21.016934611Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.016936645Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:29:21.016995005Z     return self._loop.run_until_complete(task)
2025-10-14T02:29:21.017004494Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.017006527Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:29:21.017106998Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:29:21.017147535Z     await self._serve(sockets)
2025-10-14T02:29:21.017156202Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:29:21.017218149Z     config.load()
2025-10-14T02:29:21.017225013Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:29:21.017305425Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:29:21.017319382Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.017321496Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:29:21.017360239Z     module = importlib.import_module(module_str)
2025-10-14T02:29:21.017375719Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.017377883Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:29:21.017434861Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:29:21.017454499Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.017457344Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:29:21.017459388Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:29:21.017461282Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:29:21.017463145Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:29:21.017465169Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:29:21.017468896Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:29:21.017478454Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:29:21.017672653Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:29:21.017691068Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:29:21.017762494Z     from ..services.rag_service import rag_service
2025-10-14T02:29:21.017767593Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:29:21.017827958Z     from .pinecone_service import pinecone_service
2025-10-14T02:29:21.017831815Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:29:21.017894565Z     pinecone_service = PineconeService()
2025-10-14T02:29:21.017900396Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:29:21.017902570Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:29:21.017958787Z     self._initialize_client()
2025-10-14T02:29:21.017963365Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:29:21.018010746Z     raise e
2025-10-14T02:29:21.018013180Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:29:21.018057935Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:29:21.018072443Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:29:28.972879944Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:29:28.972913579Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:29:29.275529466Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:29:29.275554915Z Hair Change 모듈 로드 성공
2025-10-14T02:29:33.236776764Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:33.236813283Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:29:33.307158924Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:29:33.307192838Z   warnings.warn(
2025-10-14T02:29:33.307241140Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:34.529115672Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:29:34.614070912Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:34.614082654Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:29:34.614369890Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:34.614377294Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:29:34.614409154Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:34.677113576Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:29:34.677145156Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:34.677177257Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:29:34.712689824Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:35.725076045Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:29:35.808061994Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:35.808086661Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:29:35.808250792Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:35.808265781Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:29:35.808281250Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:35.869662598Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:29:35.869693567Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:35.869731670Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:29:35.904205301Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:36.581312153Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:29:36.649276219Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:36.649302308Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:29:36.649508160Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:36.649520383Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:29:36.649523649Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:36.712446076Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:29:36.712478226Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:29:36.729101361Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:29:36.729515158Z Traceback (most recent call last):
2025-10-14T02:29:36.729522662Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:29:36.729526539Z     sys.exit(main())
2025-10-14T02:29:36.729536288Z              ^^^^^^
2025-10-14T02:29:36.729539093Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:29:36.729796372Z     return self.main(*args, **kwargs)
2025-10-14T02:29:36.729807784Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.729810910Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:29:36.729988647Z     rv = self.invoke(ctx)
2025-10-14T02:29:36.729992535Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.729994879Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:29:36.730175302Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:29:36.730182105Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.730185131Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:29:36.730248581Z     return callback(*args, **kwargs)
2025-10-14T02:29:36.730251597Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.730253941Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:29:36.730415609Z     run(
2025-10-14T02:29:36.730431389Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:29:36.730441308Z     server.run()
2025-10-14T02:29:36.730446217Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:29:36.730499137Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:29:36.730527381Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.730530166Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:29:36.730562778Z     return runner.run(main)
2025-10-14T02:29:36.730565584Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.730572978Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:29:36.730668168Z     return self._loop.run_until_complete(task)
2025-10-14T02:29:36.730676795Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.730681925Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:29:36.730836408Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:29:36.730845525Z     await self._serve(sockets)
2025-10-14T02:29:36.730848231Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:29:36.730880823Z     config.load()
2025-10-14T02:29:36.730887706Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:29:36.730987876Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:29:36.730992615Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.730995090Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:29:36.731024335Z     module = importlib.import_module(module_str)
2025-10-14T02:29:36.731027010Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.731029455Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:29:36.731123093Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:29:36.731126008Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.731128553Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:29:36.731131759Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:29:36.731134164Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:29:36.731136689Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:29:36.731139194Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:29:36.731141648Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:29:36.731145345Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:29:36.731386864Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:29:36.731393987Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:29:36.731423814Z     from ..services.rag_service import rag_service
2025-10-14T02:29:36.731429325Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:29:36.731490771Z     from .pinecone_service import pinecone_service
2025-10-14T02:29:36.731495951Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:29:36.731573779Z     pinecone_service = PineconeService()
2025-10-14T02:29:36.731588417Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:29:36.731591733Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:29:36.731617663Z     self._initialize_client()
2025-10-14T02:29:36.731624205Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:29:36.731666395Z     raise e
2025-10-14T02:29:36.731671495Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:29:36.731742740Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:29:36.731759873Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:29:44.765846079Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:29:44.765867339Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:29:45.064528052Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:29:45.064542279Z Hair Change 모듈 로드 성공
2025-10-14T02:29:49.031899736Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:49.031919744Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:29:49.093728775Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:29:49.093744935Z   warnings.warn(
2025-10-14T02:29:49.093749794Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:50.312983599Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:29:50.397950301Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:50.397961722Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:29:50.398266451Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:29:50.398274386Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:29:50.398277672Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:50.461631979Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:29:50.461649873Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:50.461697173Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:29:50.499752751Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:51.533727142Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:29:51.616542115Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:51.616570389Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:29:51.616821716Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:29:51.616834961Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:29:51.616838037Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:51.679060223Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:29:51.679100319Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:51.679143852Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:29:51.721425690Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:29:52.402646288Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:29:52.470597479Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:29:52.470627587Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:29:52.470862172Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:29:52.470874456Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:29:52.470877872Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:29:52.533110548Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:29:52.533139493Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:29:52.549732551Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:29:52.550180932Z Traceback (most recent call last):
2025-10-14T02:29:52.550188677Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:29:52.550198256Z     sys.exit(main())
2025-10-14T02:29:52.550222522Z              ^^^^^^
2025-10-14T02:29:52.550229645Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:29:52.550462357Z     return self.main(*args, **kwargs)
2025-10-14T02:29:52.550469320Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.550472396Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:29:52.550634675Z     rv = self.invoke(ctx)
2025-10-14T02:29:52.550638081Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.550640396Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:29:52.550819316Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:29:52.550827501Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.550829926Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:29:52.550955154Z     return callback(*args, **kwargs)
2025-10-14T02:29:52.550958179Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.550960534Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:29:52.551035647Z     run(
2025-10-14T02:29:52.551037891Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:29:52.551147609Z     server.run()
2025-10-14T02:29:52.551150605Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:29:52.551183207Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:29:52.551210158Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.551212382Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:29:52.551256346Z     return runner.run(main)
2025-10-14T02:29:52.551259181Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.551261045Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:29:52.551331308Z     return self._loop.run_until_complete(task)
2025-10-14T02:29:52.551338242Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.551341428Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:29:52.551428062Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:29:52.551470052Z     await self._serve(sockets)
2025-10-14T02:29:52.551483968Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:29:52.551531378Z     config.load()
2025-10-14T02:29:52.551541498Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:29:52.551634444Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:29:52.551641808Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.551643782Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:29:52.551688297Z     module = importlib.import_module(module_str)
2025-10-14T02:29:52.551703776Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.551717222Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:29:52.551779029Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:29:52.551788467Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.551791603Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:29:52.551794348Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:29:52.551796763Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:29:52.551799979Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:29:52.551802424Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:29:52.551804748Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:29:52.551815208Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:29:52.552011521Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:29:52.552027701Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:29:52.552089679Z     from ..services.rag_service import rag_service
2025-10-14T02:29:52.552092424Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:29:52.552154553Z     from .pinecone_service import pinecone_service
2025-10-14T02:29:52.552157699Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:29:52.552226619Z     pinecone_service = PineconeService()
2025-10-14T02:29:52.552229315Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:29:52.552231659Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:29:52.552278718Z     self._initialize_client()
2025-10-14T02:29:52.552286553Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:29:52.552338001Z     raise e
2025-10-14T02:29:52.552341277Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:29:52.552388958Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:29:52.552395600Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:00.598351990Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:30:00.598382408Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:30:00.898981784Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:30:00.899005630Z Hair Change 모듈 로드 성공
2025-10-14T02:30:04.867920326Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:04.867947968Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:30:04.937728846Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:30:04.937754645Z   warnings.warn(
2025-10-14T02:30:04.937757671Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:06.192348766Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:30:06.277639493Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:06.277650715Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:30:06.277958409Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:06.277970412Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:30:06.277995870Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:06.342143805Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:30:06.342167270Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:06.342171277Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:30:06.385418930Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:07.398051891Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:30:07.482064590Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:07.482087664Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:30:07.482288375Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:07.482296060Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:30:07.482299356Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:07.544064714Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:30:07.544096334Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:07.544138464Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:30:07.579575998Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:08.258919840Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:30:08.326908242Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:08.326930153Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:30:08.327146184Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:08.327162184Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:30:08.327169348Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:08.390861076Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:30:08.390882136Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:30:08.407649565Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:08.408091635Z Traceback (most recent call last):
2025-10-14T02:30:08.408112314Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:30:08.408118296Z     sys.exit(main())
2025-10-14T02:30:08.408123586Z              ^^^^^^
2025-10-14T02:30:08.408128255Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:30:08.408381065Z     return self.main(*args, **kwargs)
2025-10-14T02:30:08.408399350Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.408406213Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:30:08.408551078Z     rv = self.invoke(ctx)
2025-10-14T02:30:08.408555616Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.408558552Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:30:08.408743163Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:30:08.408754975Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.408757971Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:30:08.408855166Z     return callback(*args, **kwargs)
2025-10-14T02:30:08.408858632Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.408867429Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:30:08.408985403Z     run(
2025-10-14T02:30:08.409000642Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:30:08.409048212Z     server.run()
2025-10-14T02:30:08.409053362Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:30:08.409099169Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:30:08.409127714Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.409130479Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:30:08.409173110Z     return runner.run(main)
2025-10-14T02:30:08.409176256Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.409183369Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:30:08.409258312Z     return self._loop.run_until_complete(task)
2025-10-14T02:30:08.409265525Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.409270415Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:30:08.409358392Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:30:08.409396474Z     await self._serve(sockets)
2025-10-14T02:30:08.409403858Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:30:08.409469283Z     config.load()
2025-10-14T02:30:08.409476145Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:30:08.409561768Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:30:08.409566076Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.409568691Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:30:08.409621001Z     module = importlib.import_module(module_str)
2025-10-14T02:30:08.409628054Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.409632643Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:30:08.409683880Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:30:08.409697416Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.409700351Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:30:08.409703107Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:30:08.409705411Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:30:08.409713988Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:30:08.409722574Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:30:08.409725579Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:30:08.409741971Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:30:08.409937843Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:30:08.409941921Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:30:08.410007686Z     from ..services.rag_service import rag_service
2025-10-14T02:30:08.410016612Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:30:08.410075384Z     from .pinecone_service import pinecone_service
2025-10-14T02:30:08.410078390Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:30:08.410146940Z     pinecone_service = PineconeService()
2025-10-14T02:30:08.410149966Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:30:08.410152511Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:30:08.410198548Z     self._initialize_client()
2025-10-14T02:30:08.410205081Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:30:08.410282377Z     raise e
2025-10-14T02:30:08.410295512Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:30:08.410311613Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:30:08.410331741Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:16.344426027Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:30:16.344460252Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:30:16.647631725Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:30:16.647663285Z Hair Change 모듈 로드 성공
2025-10-14T02:30:20.622286838Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:20.622328948Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:30:20.693088606Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:30:20.693101951Z   warnings.warn(
2025-10-14T02:30:20.693165913Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:21.927522731Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:30:22.012262552Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:22.012285255Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:30:22.012556340Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:22.012564696Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:30:22.012573623Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:22.075396180Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:30:22.075421908Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:22.075458228Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:30:22.111740125Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:23.127843861Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:30:23.211103108Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:23.211114780Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:30:23.211118447Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:23.211121463Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:30:23.211123807Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:23.273111447Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:30:23.273141765Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:23.273183504Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:30:23.319423894Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:24.012023653Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:30:24.079865426Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:24.079880265Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:30:24.080105302Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:24.080112055Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:30:24.080147472Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:24.143048879Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:30:24.143070690Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:30:24.159704485Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:24.160130996Z Traceback (most recent call last):
2025-10-14T02:30:24.160137949Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:30:24.160146685Z     sys.exit(main())
2025-10-14T02:30:24.160157105Z              ^^^^^^
2025-10-14T02:30:24.160159830Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:30:24.160414234Z     return self.main(*args, **kwargs)
2025-10-14T02:30:24.160421087Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.160424143Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:30:24.160611138Z     rv = self.invoke(ctx)
2025-10-14T02:30:24.160616869Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.160619434Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:30:24.160800658Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:30:24.160809765Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.160812220Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:30:24.160893615Z     return callback(*args, **kwargs)
2025-10-14T02:30:24.160896240Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.160898293Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:30:24.161014174Z     run(
2025-10-14T02:30:24.161016578Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:30:24.161082514Z     server.run()
2025-10-14T02:30:24.161084748Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:30:24.161142948Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:30:24.161162996Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.161165060Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:30:24.161207301Z     return runner.run(main)
2025-10-14T02:30:24.161213663Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.161216087Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:30:24.161308052Z     return self._loop.run_until_complete(task)
2025-10-14T02:30:24.161327659Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.161330715Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:30:24.161386762Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:30:24.161425535Z     await self._serve(sockets)
2025-10-14T02:30:24.161434853Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:30:24.161491190Z     config.load()
2025-10-14T02:30:24.161495919Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:30:24.161612270Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:30:24.161620195Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.161623291Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:30:24.161637268Z     module = importlib.import_module(module_str)
2025-10-14T02:30:24.161655011Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.161657837Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:30:24.161717280Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:30:24.161748970Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.161754120Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:30:24.161756715Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:30:24.161759189Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:30:24.161761524Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:30:24.161763838Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:30:24.161766213Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:30:24.161768677Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:30:24.161980139Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:30:24.161988365Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:30:24.162029393Z     from ..services.rag_service import rag_service
2025-10-14T02:30:24.162033521Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:30:24.162096540Z     from .pinecone_service import pinecone_service
2025-10-14T02:30:24.162101189Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:30:24.162156364Z     pinecone_service = PineconeService()
2025-10-14T02:30:24.162169409Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:30:24.162173096Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:30:24.162220205Z     self._initialize_client()
2025-10-14T02:30:24.162225145Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:30:24.162270781Z     raise e
2025-10-14T02:30:24.162274839Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:30:24.162319674Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:30:24.162331186Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:32.135413771Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:30:32.135439100Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:30:32.438358314Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:30:32.438382730Z Hair Change 모듈 로드 성공
2025-10-14T02:30:36.430442864Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:36.430471298Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:30:36.536128202Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:30:36.536141928Z   warnings.warn(
2025-10-14T02:30:36.536164631Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:37.758530587Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:30:37.843624620Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:37.843651662Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:30:37.843905735Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:37.843918178Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:30:37.843972301Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:37.907390229Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:30:37.907436076Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:37.907456625Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:30:37.969529847Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:38.987894098Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:30:39.070374676Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:39.070405184Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:30:39.070609011Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:39.070615674Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:30:39.070646643Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:39.132355984Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:30:39.132391071Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:39.132401020Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:30:39.166798216Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:39.848289619Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:30:39.915995404Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:39.916025071Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:30:39.916282530Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:39.916301937Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:30:39.916306946Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:39.978766824Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:30:39.978801078Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:30:39.995344562Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:39.995796310Z Traceback (most recent call last):
2025-10-14T02:30:39.995807792Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:30:39.995858869Z     sys.exit(main())
2025-10-14T02:30:39.995871092Z              ^^^^^^
2025-10-14T02:30:39.995875170Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:30:39.996175371Z     return self.main(*args, **kwargs)
2025-10-14T02:30:39.996190329Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.996196160Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:30:39.996338290Z     rv = self.invoke(ctx)
2025-10-14T02:30:39.996345985Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.996349031Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:30:39.996543851Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:30:39.996549371Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.996552868Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:30:39.996690930Z     return callback(*args, **kwargs)
2025-10-14T02:30:39.996749412Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.996780350Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:30:39.996848910Z     run(
2025-10-14T02:30:39.996858439Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:30:39.997022931Z     server.run()
2025-10-14T02:30:39.997037429Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:30:39.997043560Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:30:39.997070051Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.997078918Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:30:39.997138120Z     return runner.run(main)
2025-10-14T02:30:39.997145294Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.997150383Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:30:39.997230005Z     return self._loop.run_until_complete(task)
2025-10-14T02:30:39.997246887Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.997249972Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:30:39.997327971Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:30:39.997365562Z     await self._serve(sockets)
2025-10-14T02:30:39.997370912Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:30:39.997433281Z     config.load()
2025-10-14T02:30:39.997439904Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:30:39.997532580Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:30:39.997537689Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.997540715Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:30:39.997595629Z     module = importlib.import_module(module_str)
2025-10-14T02:30:39.997602763Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.997607362Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:30:39.997660042Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:30:39.997690149Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.997693666Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:30:39.997696992Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:30:39.997699807Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:30:39.997702362Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:30:39.997704696Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:30:39.997707011Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:30:39.997729514Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:30:39.997923482Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:30:39.997930926Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:30:39.997997272Z     from ..services.rag_service import rag_service
2025-10-14T02:30:39.998002182Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:30:39.998063238Z     from .pinecone_service import pinecone_service
2025-10-14T02:30:39.998066023Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:30:39.998133151Z     pinecone_service = PineconeService()
2025-10-14T02:30:39.998140254Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:30:39.998143360Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:30:39.998208103Z     self._initialize_client()
2025-10-14T02:30:39.998228943Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:30:39.998259060Z     raise e
2025-10-14T02:30:39.998264300Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:30:39.998320386Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:30:39.998327390Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:47.914004541Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:30:47.914038266Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:30:48.215081094Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:30:48.215110991Z Hair Change 모듈 로드 성공
2025-10-14T02:30:52.199375533Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:52.199404007Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:30:52.261201085Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:30:52.261220141Z   warnings.warn(
2025-10-14T02:30:52.261223708Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:53.479179835Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:30:53.564128943Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:53.564168749Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:30:53.564418824Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:30:53.564434804Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:30:53.564442990Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:53.628094972Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:30:53.628121262Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:53.628132243Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:30:53.662505384Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:54.672918216Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:30:54.754852957Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:54.754875259Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:30:54.755064519Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:30:54.755070039Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:30:54.755073917Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:54.816840437Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:30:54.816858982Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:54.816873610Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:30:54.853352842Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:30:55.535001684Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:30:55.602455390Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:30:55.602492811Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:30:55.602692461Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:30:55.602706798Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:30:55.602745712Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:30:55.664626008Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:30:55.664648902Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:30:55.681084680Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:30:55.681519206Z Traceback (most recent call last):
2025-10-14T02:30:55.681532511Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:30:55.681538593Z     sys.exit(main())
2025-10-14T02:30:55.681545837Z              ^^^^^^
2025-10-14T02:30:55.681550516Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:30:55.681835307Z     return self.main(*args, **kwargs)
2025-10-14T02:30:55.681857639Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.681863620Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:30:55.681924626Z     rv = self.invoke(ctx)
2025-10-14T02:30:55.681930948Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.681935507Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:30:55.682192836Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:30:55.682206642Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.682212433Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:30:55.682249794Z     return callback(*args, **kwargs)
2025-10-14T02:30:55.682255275Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.682259803Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:30:55.682389269Z     run(
2025-10-14T02:30:55.682403146Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:30:55.682458831Z     server.run()
2025-10-14T02:30:55.682464843Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:30:55.682507263Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:30:55.682524636Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.682529496Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:30:55.682600701Z     return runner.run(main)
2025-10-14T02:30:55.682615108Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.682621010Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:30:55.682678739Z     return self._loop.run_until_complete(task)
2025-10-14T02:30:55.682695892Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.682699248Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:30:55.682781104Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:30:55.682815579Z     await self._serve(sockets)
2025-10-14T02:30:55.682820970Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:30:55.682881625Z     config.load()
2025-10-14T02:30:55.682886414Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:30:55.682988197Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:30:55.682995471Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.683000160Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:30:55.683043402Z     module = importlib.import_module(module_str)
2025-10-14T02:30:55.683052419Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.683055976Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:30:55.683134325Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:30:55.683137982Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.683140557Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:30:55.683143422Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:30:55.683146188Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:30:55.683148612Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:30:55.683150906Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:30:55.683153221Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:30:55.683155515Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:30:55.683352319Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:30:55.683360424Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:30:55.683430778Z     from ..services.rag_service import rag_service
2025-10-14T02:30:55.683435778Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:30:55.683495100Z     from .pinecone_service import pinecone_service
2025-10-14T02:30:55.683501923Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:30:55.683558180Z     pinecone_service = PineconeService()
2025-10-14T02:30:55.683562799Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:30:55.683565434Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:30:55.683622663Z     self._initialize_client()
2025-10-14T02:30:55.683629395Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:30:55.683673900Z     raise e
2025-10-14T02:30:55.683678669Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:30:55.683741609Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:30:55.683754604Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:03.660282085Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:31:03.660315338Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:31:03.959273736Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:31:03.959289576Z Hair Change 모듈 로드 성공
2025-10-14T02:31:07.915780626Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:07.915804472Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:31:07.983746095Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:31:07.983764720Z   warnings.warn(
2025-10-14T02:31:07.983813363Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:09.243853541Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:31:09.328754218Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:09.328780478Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:31:09.329063355Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:09.329079225Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:31:09.329088503Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:09.390671985Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:31:09.390704377Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:09.390737139Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:31:09.421407504Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:10.467951157Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:31:10.550242876Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:10.550256332Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:31:10.550477512Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:10.550484555Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:31:10.550487902Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:10.612009346Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:31:10.612044122Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:10.612068448Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:31:10.659266527Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:11.358778972Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:31:11.425804083Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:11.425822508Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:31:11.426048468Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:11.426055882Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:31:11.426059118Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:11.489142139Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:31:11.489170283Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:31:11.505652359Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:11.506062549Z Traceback (most recent call last):
2025-10-14T02:31:11.506074061Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:31:11.506083729Z     sys.exit(main())
2025-10-14T02:31:11.506092115Z              ^^^^^^
2025-10-14T02:31:11.506094740Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:31:11.506344845Z     return self.main(*args, **kwargs)
2025-10-14T02:31:11.506351959Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.506354984Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:31:11.506549253Z     rv = self.invoke(ctx)
2025-10-14T02:31:11.506556077Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.506559082Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:31:11.506701823Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:31:11.506707124Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.506730097Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:31:11.506882066Z     return callback(*args, **kwargs)
2025-10-14T02:31:11.506900741Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.506906542Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:31:11.506935427Z     run(
2025-10-14T02:31:11.506941088Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:31:11.507027612Z     server.run()
2025-10-14T02:31:11.507031009Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:31:11.507081395Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:31:11.507104018Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.507106703Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:31:11.507155806Z     return runner.run(main)
2025-10-14T02:31:11.507158531Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.507160896Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:31:11.507217723Z     return self._loop.run_until_complete(task)
2025-10-14T02:31:11.507225378Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.507228183Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:31:11.507374752Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:31:11.507391814Z     await self._serve(sockets)
2025-10-14T02:31:11.507399168Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:31:11.507435367Z     config.load()
2025-10-14T02:31:11.507439435Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:31:11.507560214Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:31:11.507568290Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.507571395Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:31:11.507586434Z     module = importlib.import_module(module_str)
2025-10-14T02:31:11.507598597Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.507601202Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:31:11.507665254Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:31:11.507682837Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.507685482Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:31:11.507688478Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:31:11.507690793Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:31:11.507693177Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:31:11.507695491Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:31:11.507700351Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:31:11.507706212Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:31:11.507907304Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:31:11.507948091Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:31:11.507984941Z     from ..services.rag_service import rag_service
2025-10-14T02:31:11.507992856Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:31:11.508051147Z     from .pinecone_service import pinecone_service
2025-10-14T02:31:11.508054473Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:31:11.508115349Z     pinecone_service = PineconeService()
2025-10-14T02:31:11.508129967Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:31:11.508132592Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:31:11.508190652Z     self._initialize_client()
2025-10-14T02:31:11.508199539Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:31:11.508234716Z     raise e
2025-10-14T02:31:11.508239425Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:31:11.508277838Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:31:11.508294369Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:19.442867364Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:31:19.442900197Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:31:19.747960609Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:31:19.747995595Z Hair Change 모듈 로드 성공
2025-10-14T02:31:23.711121252Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:23.711156609Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:31:23.771954148Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:31:23.771968575Z   warnings.warn(
2025-10-14T02:31:23.772001769Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:24.997378004Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:31:25.084525660Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:25.084540067Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:31:25.084860877Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:25.084873250Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:31:25.084882167Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:25.149738508Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:31:25.149783723Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:25.149802269Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:31:25.188083445Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:26.195262333Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:31:26.276161666Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:26.276173970Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:31:26.276407213Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:26.276414417Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:31:26.276417733Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:26.338004522Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:31:26.338025491Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:26.338068753Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:31:26.371198181Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:27.049371099Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:31:27.116392593Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:27.116404606Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:31:27.116631998Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:27.116639142Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:31:27.116642278Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:27.177418176Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:31:27.177429307Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:31:27.193734237Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:27.194130380Z Traceback (most recent call last):
2025-10-14T02:31:27.194137273Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:31:27.194168292Z     sys.exit(main())
2025-10-14T02:31:27.194171548Z              ^^^^^^
2025-10-14T02:31:27.194173973Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:31:27.194453273Z     return self.main(*args, **kwargs)
2025-10-14T02:31:27.194475736Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.194482148Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:31:27.194620291Z     rv = self.invoke(ctx)
2025-10-14T02:31:27.194628025Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.194631061Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:31:27.194762681Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:31:27.194770456Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.194772891Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:31:27.194921433Z     return callback(*args, **kwargs)
2025-10-14T02:31:27.194928236Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.194931221Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:31:27.194992508Z     run(
2025-10-14T02:31:27.194995854Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:31:27.195093590Z     server.run()
2025-10-14T02:31:27.195096566Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:31:27.195147282Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:31:27.195175626Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.195178301Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:31:27.195218197Z     return runner.run(main)
2025-10-14T02:31:27.195221212Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.195223597Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:31:27.195289001Z     return self._loop.run_until_complete(task)
2025-10-14T02:31:27.195291726Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.195294141Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:31:27.195387188Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:31:27.195430510Z     await self._serve(sockets)
2025-10-14T02:31:27.195433125Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:31:27.195488831Z     config.load()
2025-10-14T02:31:27.195491817Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:31:27.195587138Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:31:27.195589873Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.195604000Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:31:27.195657512Z     module = importlib.import_module(module_str)
2025-10-14T02:31:27.195672460Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.195678221Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:31:27.195723437Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:31:27.195732274Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.195734808Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:31:27.195737173Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:31:27.195751711Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:31:27.195759145Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:31:27.195763693Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:31:27.195768102Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:31:27.195773011Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:31:27.195959606Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:31:27.195964315Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:31:27.196027204Z     from ..services.rag_service import rag_service
2025-10-14T02:31:27.196030550Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:31:27.196097377Z     from .pinecone_service import pinecone_service
2025-10-14T02:31:27.196100253Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:31:27.196161419Z     pinecone_service = PineconeService()
2025-10-14T02:31:27.196164284Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:31:27.196166679Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:31:27.196220441Z     self._initialize_client()
2025-10-14T02:31:27.196223287Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:31:27.196275636Z     raise e
2025-10-14T02:31:27.196278351Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:31:27.196329558Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:31:27.196332093Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:35.210941352Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:31:35.210984334Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:31:35.508773310Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:31:35.508801373Z Hair Change 모듈 로드 성공
2025-10-14T02:31:39.554401215Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:39.554433587Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:31:39.627056935Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:31:39.627069389Z   warnings.warn(
2025-10-14T02:31:39.627072405Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:40.858555894Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:31:40.943361420Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:40.943391807Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:31:40.943660207Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:40.943667651Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:31:40.943698901Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:41.005775179Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:31:41.005817249Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:41.005834031Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:31:41.042656005Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:42.059732759Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:31:42.144304390Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:42.144315622Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:31:42.144575185Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:42.144591636Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:31:42.144608779Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:42.206736875Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:31:42.206792601Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:42.206828730Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:31:42.240434072Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:42.937545874Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:31:43.004518817Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:43.004538324Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:31:43.004766007Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:43.004784823Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:31:43.004790663Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:43.066406708Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:31:43.066426936Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:31:43.082889346Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:43.083302491Z Traceback (most recent call last):
2025-10-14T02:31:43.083308141Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:31:43.083332397Z     sys.exit(main())
2025-10-14T02:31:43.083342106Z              ^^^^^^
2025-10-14T02:31:43.083347476Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:31:43.083585518Z     return self.main(*args, **kwargs)
2025-10-14T02:31:43.083592311Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.083594916Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:31:43.083790448Z     rv = self.invoke(ctx)
2025-10-14T02:31:43.083800206Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.083802771Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:31:43.083948598Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:31:43.083964158Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.083966502Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:31:43.084143408Z     return callback(*args, **kwargs)
2025-10-14T02:31:43.084160451Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.084166232Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:31:43.084176281Z     run(
2025-10-14T02:31:43.084181410Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:31:43.084279737Z     server.run()
2025-10-14T02:31:43.084287051Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:31:43.084313071Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:31:43.084336986Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.084339200Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:31:43.084380138Z     return runner.run(main)
2025-10-14T02:31:43.084382583Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.084384536Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:31:43.084444390Z     return self._loop.run_until_complete(task)
2025-10-14T02:31:43.084450873Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.084452826Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:31:43.084547025Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:31:43.084590057Z     await self._serve(sockets)
2025-10-14T02:31:43.084606208Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:31:43.084664218Z     config.load()
2025-10-14T02:31:43.084672714Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:31:43.084773756Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:31:43.084787312Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.084790398Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:31:43.084824853Z     module = importlib.import_module(module_str)
2025-10-14T02:31:43.084831846Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.084836355Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:31:43.084885539Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:31:43.084907781Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.084910576Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:31:43.084913131Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:31:43.084915435Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:31:43.084917730Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:31:43.084920154Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:31:43.084922529Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:31:43.084928841Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:31:43.085115556Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:31:43.085123751Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:31:43.085202280Z     from ..services.rag_service import rag_service
2025-10-14T02:31:43.085209574Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:31:43.085261182Z     from .pinecone_service import pinecone_service
2025-10-14T02:31:43.085266162Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:31:43.085319894Z     pinecone_service = PineconeService()
2025-10-14T02:31:43.085343509Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:31:43.085346584Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:31:43.085374588Z     self._initialize_client()
2025-10-14T02:31:43.085381651Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:31:43.085428079Z     raise e
2025-10-14T02:31:43.085430855Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:31:43.085477744Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:31:43.085493804Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:50.966806572Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:31:50.966827762Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:31:51.267098594Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:31:51.267112069Z Hair Change 모듈 로드 성공
2025-10-14T02:31:55.326173209Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:55.326200481Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:31:55.394891748Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:31:55.394907759Z   warnings.warn(
2025-10-14T02:31:55.394934720Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:56.613846563Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:31:56.698573318Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:56.698603486Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:31:56.698865624Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:31:56.698888116Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:31:56.698900931Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:56.762043355Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:31:56.762083772Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:56.762118197Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:31:56.795050350Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:57.806742443Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:31:57.888844692Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:57.888877996Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:31:57.888989167Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:31:57.889004957Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:31:57.889012191Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:57.950538715Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:31:57.950563772Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:57.950584752Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:31:57.982627645Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:31:58.662356339Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:31:58.729388263Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:31:58.729418751Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:31:58.729609834Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:31:58.729621697Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:31:58.729625093Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:31:58.791375773Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:31:58.791405520Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:31:58.807832702Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:31:58.808267198Z Traceback (most recent call last):
2025-10-14T02:31:58.808279401Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:31:58.808284831Z     sys.exit(main())
2025-10-14T02:31:58.808310791Z              ^^^^^^
2025-10-14T02:31:58.808320750Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:31:58.808533414Z     return self.main(*args, **kwargs)
2025-10-14T02:31:58.808543433Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.808545887Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:31:58.808737071Z     rv = self.invoke(ctx)
2025-10-14T02:31:58.808746939Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.808749534Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:31:58.808908937Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:31:58.808914828Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.808917353Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:31:58.809026701Z     return callback(*args, **kwargs)
2025-10-14T02:31:58.809029536Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.809031390Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:31:58.809131620Z     run(
2025-10-14T02:31:58.809134055Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:31:58.809204028Z     server.run()
2025-10-14T02:31:58.809206453Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:31:58.809260876Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:31:58.809297245Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.809299409Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:31:58.809341028Z     return runner.run(main)
2025-10-14T02:31:58.809343483Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.809358201Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:31:58.809412043Z     return self._loop.run_until_complete(task)
2025-10-14T02:31:58.809419227Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.809421682Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:31:58.809556928Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:31:58.809567589Z     await self._serve(sockets)
2025-10-14T02:31:58.809586324Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:31:58.809633093Z     config.load()
2025-10-14T02:31:58.809636430Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:31:58.809775955Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:31:58.809790813Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.809793929Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:31:58.809807805Z     module = importlib.import_module(module_str)
2025-10-14T02:31:58.809824627Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.809829015Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:31:58.809887967Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:31:58.809900381Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.809903066Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:31:58.809905571Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:31:58.809908747Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:31:58.809911152Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:31:58.809928685Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:31:58.809936379Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:31:58.809939626Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:31:58.810123024Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:31:58.810138133Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:31:58.810207524Z     from ..services.rag_service import rag_service
2025-10-14T02:31:58.810211683Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:31:58.810278309Z     from .pinecone_service import pinecone_service
2025-10-14T02:31:58.810285513Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:31:58.810336921Z     pinecone_service = PineconeService()
2025-10-14T02:31:58.810346649Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:31:58.810349184Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:31:58.810399449Z     self._initialize_client()
2025-10-14T02:31:58.810402655Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:31:58.810456027Z     raise e
2025-10-14T02:31:58.810459603Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:31:58.810505270Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:31:58.810516061Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:32:06.738689216Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:32:06.738742988Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:32:07.039118098Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:32:07.039148245Z Hair Change 모듈 로드 성공
2025-10-14T02:32:11.059759588Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:11.059789335Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:32:11.129186353Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:32:11.129211791Z   warnings.warn(
2025-10-14T02:32:11.129232932Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:12.370050306Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:32:12.455497280Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:12.455530663Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:32:12.455850762Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:12.455864137Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:32:12.455882602Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:12.519613775Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:32:12.519661305Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:32:12.519695290Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:32:12.554498237Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:13.570895481Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:32:13.654380397Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:13.654388562Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:32:13.654626314Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:32:13.654629520Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:32:13.654657684Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:13.715575661Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:32:13.715631618Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:32:13.715672185Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:32:13.752290542Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:14.433364271Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:32:14.503393901Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:14.503412016Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:32:14.503597388Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:32:14.503602848Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:32:14.503606636Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:14.565188474Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:32:14.565206840Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:32:14.581604907Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:32:14.582011700Z Traceback (most recent call last):
2025-10-14T02:32:14.582029524Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:32:14.582034683Z     sys.exit(main())
2025-10-14T02:32:14.582038661Z              ^^^^^^
2025-10-14T02:32:14.582042478Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:32:14.582288025Z     return self.main(*args, **kwargs)
2025-10-14T02:32:14.582299466Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.582304506Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:32:14.582414385Z     rv = self.invoke(ctx)
2025-10-14T02:32:14.582417150Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.582419024Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:32:14.582734413Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:32:14.582746015Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.582749251Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:32:14.582857397Z     return callback(*args, **kwargs)
2025-10-14T02:32:14.582863137Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.582865662Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:32:14.582926448Z     run(
2025-10-14T02:32:14.582930225Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:32:14.583032419Z     server.run()
2025-10-14T02:32:14.583034944Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:32:14.583069349Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:32:14.583088506Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.583090670Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:32:14.583140564Z     return runner.run(main)
2025-10-14T02:32:14.583142729Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.583144602Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:32:14.583216389Z     return self._loop.run_until_complete(task)
2025-10-14T02:32:14.583223282Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.583226278Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:32:14.583315437Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:32:14.583357136Z     await self._serve(sockets)
2025-10-14T02:32:14.583370832Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:32:14.583414906Z     config.load()
2025-10-14T02:32:14.583427810Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:32:14.583511660Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:32:14.583525696Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.583527790Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:32:14.583571343Z     module = importlib.import_module(module_str)
2025-10-14T02:32:14.583581142Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.583583907Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:32:14.583638140Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:32:14.583662707Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.583665212Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:32:14.583667115Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:32:14.583668999Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:32:14.583671023Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:32:14.583673016Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:32:14.583676262Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:32:14.583684829Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:32:14.583903144Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:32:14.583917360Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:32:14.583995199Z     from ..services.rag_service import rag_service
2025-10-14T02:32:14.583998234Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:32:14.584062596Z     from .pinecone_service import pinecone_service
2025-10-14T02:32:14.584065192Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:32:14.584183386Z     pinecone_service = PineconeService()
2025-10-14T02:32:14.584200448Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:32:14.584203735Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:32:14.584209726Z     self._initialize_client()
2025-10-14T02:32:14.584212672Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:32:14.584256685Z     raise e
2025-10-14T02:32:14.584261284Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:32:14.584303544Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:32:14.584316008Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:32:22.512469345Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:32:22.512506476Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:32:22.814488138Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:32:22.814506804Z Hair Change 모듈 로드 성공
2025-10-14T02:32:26.769593196Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:26.769625767Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:32:26.835847463Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:32:26.835873542Z   warnings.warn(
2025-10-14T02:32:26.835883251Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:28.067144948Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:32:28.151451776Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:28.151482294Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:32:28.151749923Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:28.151763489Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:32:28.151766655Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:28.214847522Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:32:28.214867119Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:32:28.214903819Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:32:28.252967843Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:29.269680595Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:32:29.351571914Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:29.351584297Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:32:29.351816769Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:32:29.351826898Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:32:29.351835394Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:29.413375674Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:32:29.413427122Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:32:29.413455817Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:32:29.449593931Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:30.131016373Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:32:30.198335814Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:30.198357315Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:32:30.198593644Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:32:30.198597190Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:32:30.198600036Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:30.260637380Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:32:30.260648872Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:32:30.277287406Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:32:30.277728484Z Traceback (most recent call last):
2025-10-14T02:32:30.277739856Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:32:30.277743523Z     sys.exit(main())
2025-10-14T02:32:30.277746198Z              ^^^^^^
2025-10-14T02:32:30.277751278Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:32:30.278016882Z     return self.main(*args, **kwargs)
2025-10-14T02:32:30.278024647Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.278027623Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:32:30.278219708Z     rv = self.invoke(ctx)
2025-10-14T02:32:30.278226641Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.278229596Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:32:30.278403928Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:32:30.278410851Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.278413947Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:32:30.278477217Z     return callback(*args, **kwargs)
2025-10-14T02:32:30.278480483Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.278482777Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:32:30.278640678Z     run(
2025-10-14T02:32:30.278656999Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:32:30.278691304Z     server.run()
2025-10-14T02:32:30.278699529Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:32:30.278752139Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:32:30.278776576Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.278780704Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:32:30.278816872Z     return runner.run(main)
2025-10-14T02:32:30.278831821Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.278834857Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:32:30.278899189Z     return self._loop.run_until_complete(task)
2025-10-14T02:32:30.278910470Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.278914728Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:32:30.279005361Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:32:30.279051007Z     await self._serve(sockets)
2025-10-14T02:32:30.279055215Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:32:30.279108657Z     config.load()
2025-10-14T02:32:30.279122433Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:32:30.279211152Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:32:30.279215881Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.279218365Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:32:30.279263020Z     module = importlib.import_module(module_str)
2025-10-14T02:32:30.279273590Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.279277127Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:32:30.279335979Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:32:30.279361237Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.279365204Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:32:30.279367679Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:32:30.279369913Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:32:30.279372278Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:32:30.279374622Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:32:30.279376907Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:32:30.279383720Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:32:30.279576335Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:32:30.279593809Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:32:30.279654604Z     from ..services.rag_service import rag_service
2025-10-14T02:32:30.279657570Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:32:30.279730078Z     from .pinecone_service import pinecone_service
2025-10-14T02:32:30.279737341Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:32:30.279797786Z     pinecone_service = PineconeService()
2025-10-14T02:32:30.279805330Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:32:30.279807935Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:32:30.279856618Z     self._initialize_client()
2025-10-14T02:32:30.279859604Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:32:30.279916131Z     raise e
2025-10-14T02:32:30.279919097Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:32:30.279965966Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:32:30.279974963Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:32:38.265324606Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:32:38.265349233Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:32:38.565478957Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:32:38.565494166Z Hair Change 모듈 로드 성공
2025-10-14T02:32:42.539302090Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:42.539326215Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:32:42.622088889Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:32:42.622108055Z   warnings.warn(
2025-10-14T02:32:42.622131019Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:43.846512404Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:32:43.931073725Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:43.931114233Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:32:43.931383514Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:43.931392070Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:32:43.931418250Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:43.995270724Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:32:43.995307213Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:32:43.995331329Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:32:44.034222855Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:45.055566617Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:32:45.137600426Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:45.137631735Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:32:45.137858376Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:32:45.137873715Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:32:45.137878133Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:45.199643050Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:32:45.199674801Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:32:45.199682425Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:32:45.236805190Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:45.915094659Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:32:45.981697649Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:45.981756541Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:32:45.981931403Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:32:45.981944678Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:32:45.981950980Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:46.043851665Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:32:46.043877124Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:32:46.060235506Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:32:46.060689177Z Traceback (most recent call last):
2025-10-14T02:32:46.060703435Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:32:46.060731538Z     sys.exit(main())
2025-10-14T02:32:46.060751005Z              ^^^^^^
2025-10-14T02:32:46.060758078Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:32:46.060949442Z     return self.main(*args, **kwargs)
2025-10-14T02:32:46.060957678Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.060961164Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:32:46.061156796Z     rv = self.invoke(ctx)
2025-10-14T02:32:46.061164932Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.061175291Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:32:46.061342068Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:32:46.061357698Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.061363659Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:32:46.061483938Z     return callback(*args, **kwargs)
2025-10-14T02:32:46.061493175Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.061496692Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:32:46.061554021Z     run(
2025-10-14T02:32:46.061561705Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:32:46.061668829Z     server.run()
2025-10-14T02:32:46.061673778Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:32:46.061702964Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:32:46.061744813Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.061753199Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:32:46.061793987Z     return runner.run(main)
2025-10-14T02:32:46.061808985Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.061812081Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:32:46.061910408Z     return self._loop.run_until_complete(task)
2025-10-14T02:32:46.061918463Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.061923042Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:32:46.062001371Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:32:46.062040064Z     await self._serve(sockets)
2025-10-14T02:32:46.062047048Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:32:46.062118313Z     config.load()
2025-10-14T02:32:46.062125807Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:32:46.062208384Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:32:46.062213444Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.062216379Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:32:46.062269651Z     module = importlib.import_module(module_str)
2025-10-14T02:32:46.062280752Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.062287835Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:32:46.062331308Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:32:46.062344162Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.062346998Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:32:46.062349522Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:32:46.062351797Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:32:46.062354121Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:32:46.062360664Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:32:46.062363148Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:32:46.062365523Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:32:46.062572115Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:32:46.062579048Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:32:46.062645906Z     from ..services.rag_service import rag_service
2025-10-14T02:32:46.062648781Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:32:46.062719014Z     from .pinecone_service import pinecone_service
2025-10-14T02:32:46.062729594Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:32:46.062810869Z     pinecone_service = PineconeService()
2025-10-14T02:32:46.062820597Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:32:46.062825186Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:32:46.062865513Z     self._initialize_client()
2025-10-14T02:32:46.062871855Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:32:46.062912773Z     raise e
2025-10-14T02:32:46.062918023Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:32:46.062979269Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:32:46.062986192Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:32:54.066345024Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:32:54.066383788Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:32:54.371027679Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:32:54.371069909Z Hair Change 모듈 로드 성공
2025-10-14T02:32:58.418907433Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:58.418924526Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:32:58.482595093Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:32:58.482629549Z   warnings.warn(
2025-10-14T02:32:58.482634599Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:32:59.705447824Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:32:59.790749412Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:32:59.790777215Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:32:59.791115117Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:32:59.791135145Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:32:59.791140295Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:32:59.853989341Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:32:59.854015571Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:32:59.854029758Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:32:59.888823017Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:00.900351780Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:33:00.982974288Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:00.982988555Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:33:00.983210967Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:33:00.983217971Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:33:00.983221187Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:01.044760655Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:33:01.044782226Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:01.044818846Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:33:01.083942323Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:01.759324618Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:33:01.826788032Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:01.826800376Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:33:01.827048988Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:01.827055901Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:33:01.827059247Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:01.889489488Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:33:01.889500870Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:33:01.905846909Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:01.906262859Z Traceback (most recent call last):
2025-10-14T02:33:01.906269732Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:33:01.906278589Z     sys.exit(main())
2025-10-14T02:33:01.906297825Z              ^^^^^^
2025-10-14T02:33:01.906300891Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:33:01.906544945Z     return self.main(*args, **kwargs)
2025-10-14T02:33:01.906551818Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.906554844Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:33:01.906777216Z     rv = self.invoke(ctx)
2025-10-14T02:33:01.906789750Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.906792876Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:33:01.906915870Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:33:01.906922823Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.906925969Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:33:01.907083037Z     return callback(*args, **kwargs)
2025-10-14T02:33:01.907097344Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.907100370Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:33:01.907129245Z     run(
2025-10-14T02:33:01.907137331Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:33:01.907243252Z     server.run()
2025-10-14T02:33:01.907250886Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:33:01.907277256Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:33:01.907302614Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.907305410Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:33:01.907344584Z     return runner.run(main)
2025-10-14T02:33:01.907359252Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.907367648Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:33:01.907413685Z     return self._loop.run_until_complete(task)
2025-10-14T02:33:01.907424216Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.907426740Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:33:01.907547139Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:33:01.907571726Z     await self._serve(sockets)
2025-10-14T02:33:01.907575934Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:33:01.907628433Z     config.load()
2025-10-14T02:33:01.907633774Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:33:01.907730137Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:33:01.907743943Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.907746608Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:33:01.907788808Z     module = importlib.import_module(module_str)
2025-10-14T02:33:01.907797084Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.907799679Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:33:01.907852269Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:33:01.907878368Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.907881084Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:33:01.907883528Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:33:01.907885853Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:33:01.907888327Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:33:01.907890882Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:33:01.907894429Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:33:01.907897144Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:33:01.908094499Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:33:01.908104638Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:33:01.908175633Z     from ..services.rag_service import rag_service
2025-10-14T02:33:01.908179340Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:33:01.908276665Z     from .pinecone_service import pinecone_service
2025-10-14T02:33:01.908284831Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:33:01.908313034Z     pinecone_service = PineconeService()
2025-10-14T02:33:01.908325298Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:33:01.908328384Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:33:01.908377567Z     self._initialize_client()
2025-10-14T02:33:01.908381865Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:33:01.908428724Z     raise e
2025-10-14T02:33:01.908431790Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:33:01.908478820Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:33:01.908488278Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:09.819107599Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:33:09.819174917Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:33:10.120615451Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:33:10.120656038Z Hair Change 모듈 로드 성공
2025-10-14T02:33:14.087725839Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:33:14.087753001Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:33:14.153014141Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:33:14.153038187Z   warnings.warn(
2025-10-14T02:33:14.153067963Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:15.379964738Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:33:15.465000400Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:15.465016501Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:33:15.465315599Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:33:15.465328133Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:33:15.465361236Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:15.527963934Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:33:15.528002949Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:33:15.528021323Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:33:15.564814443Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:16.579348265Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:33:16.662673518Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:16.662700730Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:33:16.662885120Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:33:16.662897884Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:33:16.662911891Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:16.724900152Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:33:16.724927955Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:16.724967290Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:33:16.755955359Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:17.434683090Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:33:17.502511298Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:17.502538289Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:33:17.502809575Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:17.502832328Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:33:17.502838700Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:17.564915650Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:33:17.564947130Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:33:17.581403908Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:17.581833404Z Traceback (most recent call last):
2025-10-14T02:33:17.581845357Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:33:17.581848974Z     sys.exit(main())
2025-10-14T02:33:17.581858582Z              ^^^^^^
2025-10-14T02:33:17.581861217Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:33:17.582120811Z     return self.main(*args, **kwargs)
2025-10-14T02:33:17.582128064Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.582131150Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:33:17.582298619Z     rv = self.invoke(ctx)
2025-10-14T02:33:17.582302847Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.582305361Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:33:17.582489221Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:33:17.582503898Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.582509980Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:33:17.582571417Z     return callback(*args, **kwargs)
2025-10-14T02:33:17.582579452Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.582582478Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:33:17.582675585Z     run(
2025-10-14T02:33:17.582683139Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:33:17.582771727Z     server.run()
2025-10-14T02:33:17.582781165Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:33:17.582829717Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:33:17.582855196Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.582860155Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:33:17.582890974Z     return runner.run(main)
2025-10-14T02:33:17.582894300Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.582896625Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:33:17.582973270Z     return self._loop.run_until_complete(task)
2025-10-14T02:33:17.582980785Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.582985383Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:33:17.583071497Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:33:17.583110361Z     await self._serve(sockets)
2025-10-14T02:33:17.583113497Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:33:17.583171607Z     config.load()
2025-10-14T02:33:17.583174884Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:33:17.583269714Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:33:17.583272739Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.583275084Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:33:17.583324828Z     module = importlib.import_module(module_str)
2025-10-14T02:33:17.583327834Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.583330219Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:33:17.583402285Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:33:17.583405031Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.583407385Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:33:17.583409980Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:33:17.583418827Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:33:17.583421622Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:33:17.583424097Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:33:17.583428145Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:33:17.583430679Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:33:17.583640849Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:33:17.583655136Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:33:17.583751399Z     from ..services.rag_service import rag_service
2025-10-14T02:33:17.583765997Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:33:17.583822003Z     from .pinecone_service import pinecone_service
2025-10-14T02:33:17.583837512Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:33:17.583869884Z     pinecone_service = PineconeService()
2025-10-14T02:33:17.583875435Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:33:17.583878000Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:33:17.583935398Z     self._initialize_client()
2025-10-14T02:33:17.583942602Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:33:17.583983109Z     raise e
2025-10-14T02:33:17.583987948Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:33:17.584036150Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:33:17.584043033Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:25.598263162Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:33:25.598295173Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:33:25.903344174Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:33:25.903366937Z Hair Change 모듈 로드 성공
2025-10-14T02:33:29.919707365Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:33:29.919746319Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:33:29.985824712Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:33:29.985839019Z   warnings.warn(
2025-10-14T02:33:29.985849188Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:31.214605536Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:33:31.299532682Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:31.299565725Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:33:31.299872318Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:33:31.299895882Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:33:31.299902485Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:31.362895295Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:33:31.362923619Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:33:31.362958806Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:33:31.398775329Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:32.413753886Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:33:32.496009667Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:32.496020949Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:33:32.496244594Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:33:32.496253410Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:33:32.496256686Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:32.559061189Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:33:32.559123277Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:32.559177069Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:33:32.596860470Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:33.295776300Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:33:33.362870072Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:33.362883277Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:33:33.363123263Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:33.363131008Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:33:33.363152318Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:33.425615652Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:33:33.425627595Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:33:33.442204983Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:33.442619991Z Traceback (most recent call last):
2025-10-14T02:33:33.442625802Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:33:33.442665257Z     sys.exit(main())
2025-10-14T02:33:33.442668684Z              ^^^^^^
2025-10-14T02:33:33.442671549Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:33:33.442952563Z     return self.main(*args, **kwargs)
2025-10-14T02:33:33.442980035Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.442983512Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:33:33.443115763Z     rv = self.invoke(ctx)
2025-10-14T02:33:33.443122165Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.443124951Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:33:33.443288472Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:33:33.443293170Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.443296126Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:33:33.443422756Z     return callback(*args, **kwargs)
2025-10-14T02:33:33.443427245Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.443430041Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:33:33.443505594Z     run(
2025-10-14T02:33:33.443509742Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:33:33.443606425Z     server.run()
2025-10-14T02:33:33.443611265Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:33:33.443660789Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:33:33.443688792Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.443692950Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:33:33.443750369Z     return runner.run(main)
2025-10-14T02:33:33.443760809Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.443763394Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:33:33.443814100Z     return self._loop.run_until_complete(task)
2025-10-14T02:33:33.443829429Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.443833918Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:33:33.443918569Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:33:33.443954617Z     await self._serve(sockets)
2025-10-14T02:33:33.443972301Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:33:33.444014852Z     config.load()
2025-10-14T02:33:33.444035551Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:33:33.444114581Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:33:33.444122025Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.444124109Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:33:33.444182390Z     module = importlib.import_module(module_str)
2025-10-14T02:33:33.444189483Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.444192930Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:33:33.444241342Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:33:33.444268223Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.444270728Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:33:33.444272702Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:33:33.444274575Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:33:33.444276418Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:33:33.444278272Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:33:33.444280246Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:33:33.444285446Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:33:33.444480366Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:33:33.444493782Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:33:33.444556160Z     from ..services.rag_service import rag_service
2025-10-14T02:33:33.444558334Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:33:33.444621865Z     from .pinecone_service import pinecone_service
2025-10-14T02:33:33.444624139Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:33:33.444702017Z     pinecone_service = PineconeService()
2025-10-14T02:33:33.444725892Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:33:33.444734499Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:33:33.444763634Z     self._initialize_client()
2025-10-14T02:33:33.444766870Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:33:33.444821184Z     raise e
2025-10-14T02:33:33.444824590Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:33:33.444867652Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:33:33.444881198Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:41.363899638Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:33:41.363929054Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:33:41.664089727Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:33:41.664113833Z Hair Change 모듈 로드 성공
2025-10-14T02:33:45.703747509Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:33:45.703773769Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:33:45.780584945Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:33:45.780610493Z   warnings.warn(
2025-10-14T02:33:45.780628467Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:47.008477712Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:33:47.093499137Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:47.093525437Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:33:47.093803916Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:33:47.093816119Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:33:47.093848992Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:47.157442954Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:33:47.157543375Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:33:47.157569945Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:33:47.201941634Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:48.215116274Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:33:48.297510758Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:48.297538601Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:33:48.297723473Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:33:48.297737289Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:33:48.297766865Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:48.359162210Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:33:48.359201464Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:48.359211343Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:33:48.403350660Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:33:49.080575537Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:33:49.148479919Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:33:49.148507331Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:33:49.148698183Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:33:49.148706359Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:33:49.148736526Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:33:49.211344535Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:33:49.211382117Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:33:49.228190934Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:49.228620811Z Traceback (most recent call last):
2025-10-14T02:33:49.228629457Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:33:49.228640498Z     sys.exit(main())
2025-10-14T02:33:49.228643955Z              ^^^^^^
2025-10-14T02:33:49.228646350Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:33:49.228919589Z     return self.main(*args, **kwargs)
2025-10-14T02:33:49.228930740Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.228942723Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:33:49.229095633Z     rv = self.invoke(ctx)
2025-10-14T02:33:49.229099200Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.229101885Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:33:49.229296886Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:33:49.229304260Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.229307866Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:33:49.229387979Z     return callback(*args, **kwargs)
2025-10-14T02:33:49.229391175Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.229393509Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:33:49.229533235Z     run(
2025-10-14T02:33:49.229542082Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:33:49.229581186Z     server.run()
2025-10-14T02:33:49.229585624Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:33:49.229644526Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:33:49.229666488Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.229670676Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:33:49.229720982Z     return runner.run(main)
2025-10-14T02:33:49.229730820Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.229733305Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:33:49.229785374Z     return self._loop.run_until_complete(task)
2025-10-14T02:33:49.229799090Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.229801645Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:33:49.229888901Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:33:49.229934547Z     await self._serve(sockets)
2025-10-14T02:33:49.229947642Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:33:49.230006745Z     config.load()
2025-10-14T02:33:49.230011123Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:33:49.230134156Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:33:49.230142532Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.230145618Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:33:49.230160527Z     module = importlib.import_module(module_str)
2025-10-14T02:33:49.230173141Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.230175956Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:33:49.230234638Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:33:49.230258182Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.230262891Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:33:49.230265576Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:33:49.230267911Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:33:49.230270626Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:33:49.230272900Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:33:49.230275195Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:33:49.230279383Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:33:49.230469453Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:33:49.230476968Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:33:49.230542803Z     from ..services.rag_service import rag_service
2025-10-14T02:33:49.230563392Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:33:49.230611173Z     from .pinecone_service import pinecone_service
2025-10-14T02:33:49.230615451Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:33:49.230682739Z     pinecone_service = PineconeService()
2025-10-14T02:33:49.230697647Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:33:49.230700172Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:33:49.230756830Z     self._initialize_client()
2025-10-14T02:33:49.230764895Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:33:49.230823236Z     raise e
2025-10-14T02:33:49.230830830Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:33:49.230860356Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:33:49.230875335Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:33:57.122082883Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:33:57.122111147Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:33:57.425667231Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:33:57.425693160Z Hair Change 모듈 로드 성공
2025-10-14T02:34:01.436795796Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:01.436821394Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:34:01.507179679Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:34:01.507194016Z   warnings.warn(
2025-10-14T02:34:01.507218342Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:02.724878206Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:34:02.808937824Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:02.808968693Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:34:02.809294863Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:02.809303229Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:34:02.809312897Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:02.871835243Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:34:02.871862936Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:02.871866312Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:34:02.906109757Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:03.922037297Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:34:04.003793088Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:04.003811163Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:34:04.004023696Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:04.004030830Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:34:04.004033936Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:04.065258536Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:34:04.065278093Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:04.065328349Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:34:04.100424022Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:04.791795428Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:34:04.858324056Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:04.858342651Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:34:04.858592356Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:04.858603998Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:34:04.858609288Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:04.921311837Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:34:04.921330101Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:34:04.938006508Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:34:04.938430413Z Traceback (most recent call last):
2025-10-14T02:34:04.938441574Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:34:04.938446644Z     sys.exit(main())
2025-10-14T02:34:04.938450992Z              ^^^^^^
2025-10-14T02:34:04.938454879Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:34:04.938738348Z     return self.main(*args, **kwargs)
2025-10-14T02:34:04.938756703Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.938761702Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:34:04.938905305Z     rv = self.invoke(ctx)
2025-10-14T02:34:04.938911296Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.938915084Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:34:04.939030403Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:34:04.939035252Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.939038979Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:34:04.939244389Z     return callback(*args, **kwargs)
2025-10-14T02:34:04.939255671Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.939260510Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:34:04.939273495Z     run(
2025-10-14T02:34:04.939277633Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:34:04.939370228Z     server.run()
2025-10-14T02:34:04.939375569Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:34:04.939409203Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:34:04.939461362Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.939475288Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:34:04.939484416Z     return runner.run(main)
2025-10-14T02:34:04.939489385Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.939494314Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:34:04.939558707Z     return self._loop.run_until_complete(task)
2025-10-14T02:34:04.939563516Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.939567253Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:34:04.939747836Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:34:04.939770619Z     await self._serve(sockets)
2025-10-14T02:34:04.939777032Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:34:04.939793463Z     config.load()
2025-10-14T02:34:04.939798613Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:34:04.939887441Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:34:04.939890708Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.939892631Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:34:04.939951603Z     module = importlib.import_module(module_str)
2025-10-14T02:34:04.939959288Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.939962284Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:34:04.940011086Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:34:04.940019633Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.940021777Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:34:04.940025073Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:34:04.940031024Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:34:04.940034200Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:34:04.940036675Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:34:04.940043257Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:34:04.940045802Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:34:04.940253617Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:34:04.940256553Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:34:04.940325844Z     from ..services.rag_service import rag_service
2025-10-14T02:34:04.940328249Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:34:04.940390417Z     from .pinecone_service import pinecone_service
2025-10-14T02:34:04.940392641Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:34:04.940465490Z     pinecone_service = PineconeService()
2025-10-14T02:34:04.940467984Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:34:04.940470229Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:34:04.940514633Z     self._initialize_client()
2025-10-14T02:34:04.940516867Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:34:04.940572643Z     raise e
2025-10-14T02:34:04.940574877Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:34:04.940620484Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:34:04.940622779Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:34:12.895806265Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:34:12.895833466Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:34:13.197268410Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:34:13.197281505Z Hair Change 모듈 로드 성공
2025-10-14T02:34:17.236893249Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:17.236925301Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:34:17.299360541Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:34:17.299380229Z   warnings.warn(
2025-10-14T02:34:17.299393063Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:18.531649932Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:34:18.616592638Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:18.616619509Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:34:18.616933375Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:18.616959475Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:34:18.616967590Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:18.679676731Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:34:18.679706187Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:18.679748217Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:34:18.727404948Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:19.744610487Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:34:19.826782428Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:19.826794641Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:34:19.826989081Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:19.826996094Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:34:19.827023757Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:19.889077031Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:34:19.889113400Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:19.889146964Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:34:19.929534803Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:20.615056885Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:34:20.682475694Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:20.682487377Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:34:20.682733645Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:20.682740828Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:34:20.682744265Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:20.745437576Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:34:20.745449338Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:34:20.762252134Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:34:20.762676711Z Traceback (most recent call last):
2025-10-14T02:34:20.762682622Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:34:20.762685929Z     sys.exit(main())
2025-10-14T02:34:20.762729031Z              ^^^^^^
2025-10-14T02:34:20.762738659Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:34:20.762951383Z     return self.main(*args, **kwargs)
2025-10-14T02:34:20.762958226Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.762961232Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:34:20.763180097Z     rv = self.invoke(ctx)
2025-10-14T02:34:20.763187301Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.763190858Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:34:20.763361602Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:34:20.763367954Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.763370870Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:34:20.763466351Z     return callback(*args, **kwargs)
2025-10-14T02:34:20.763472573Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.763475669Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:34:20.763583123Z     run(
2025-10-14T02:34:20.763590347Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:34:20.763666441Z     server.run()
2025-10-14T02:34:20.763672603Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:34:20.763723911Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:34:20.763745522Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.763751102Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:34:20.763795617Z     return runner.run(main)
2025-10-14T02:34:20.763799104Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.763801518Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:34:20.763864348Z     return self._loop.run_until_complete(task)
2025-10-14T02:34:20.763867213Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.763869558Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:34:20.763982091Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:34:20.764017198Z     await self._serve(sockets)
2025-10-14T02:34:20.764020104Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:34:20.764089525Z     config.load()
2025-10-14T02:34:20.764095647Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:34:20.764183494Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:34:20.764186510Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.764188914Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:34:20.764241524Z     module = importlib.import_module(module_str)
2025-10-14T02:34:20.764247345Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.764250040Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:34:20.764312830Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:34:20.764315665Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.764318370Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:34:20.764330684Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:34:20.764336454Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:34:20.764339881Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:34:20.764343127Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:34:20.764346494Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:34:20.764350932Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:34:20.764554729Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:34:20.764558907Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:34:20.764639811Z     from ..services.rag_service import rag_service
2025-10-14T02:34:20.764646293Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:34:20.764700226Z     from .pinecone_service import pinecone_service
2025-10-14T02:34:20.764703302Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:34:20.764788904Z     pinecone_service = PineconeService()
2025-10-14T02:34:20.764795988Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:34:20.764798402Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:34:20.764852014Z     self._initialize_client()
2025-10-14T02:34:20.764858907Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:34:20.764907780Z     raise e
2025-10-14T02:34:20.764910736Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:34:20.764957064Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:34:20.764959739Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:34:28.671537842Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:34:28.671564743Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:34:28.978787464Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:34:28.978820747Z Hair Change 모듈 로드 성공
2025-10-14T02:34:32.994200169Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:32.994235897Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:34:33.058018848Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:34:33.058045689Z   warnings.warn(
2025-10-14T02:34:33.058048775Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:34.279665698Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:34:34.364865592Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:34.364878577Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:34:34.365178617Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:34.365185690Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:34:34.365189067Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:34.429306323Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:34:34.429324137Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:34.429369062Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:34:34.472435631Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:35.518286669Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:34:35.603163089Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:35.603185802Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:34:35.603364331Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:35.603372206Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:34:35.603418764Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:35.665889713Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:34:35.665932224Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:35.665985345Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:34:35.708123259Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:36.403437807Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:34:36.471180873Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:36.471200860Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:34:36.471416560Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:36.471423764Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:34:36.471427120Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:36.533753304Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:34:36.533786917Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:34:36.550568994Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:34:36.551004832Z Traceback (most recent call last):
2025-10-14T02:34:36.551017256Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:34:36.551046932Z     sys.exit(main())
2025-10-14T02:34:36.551052022Z              ^^^^^^
2025-10-14T02:34:36.551054537Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:34:36.551308019Z     return self.main(*args, **kwargs)
2025-10-14T02:34:36.551315122Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.551318118Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:34:36.551458815Z     rv = self.invoke(ctx)
2025-10-14T02:34:36.551462051Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.551464666Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:34:36.551630812Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:34:36.551647464Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.551650028Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:34:36.551778362Z     return callback(*args, **kwargs)
2025-10-14T02:34:36.551787980Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.551790475Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:34:36.551880336Z     run(
2025-10-14T02:34:36.551883302Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:34:36.551986107Z     server.run()
2025-10-14T02:34:36.551995124Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:34:36.552055639Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:34:36.552087710Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.552090475Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:34:36.552128668Z     return runner.run(main)
2025-10-14T02:34:36.552145550Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.552152453Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:34:36.552197980Z     return self._loop.run_until_complete(task)
2025-10-14T02:34:36.552205444Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.552217066Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:34:36.552343346Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:34:36.552369315Z     await self._serve(sockets)
2025-10-14T02:34:36.552377932Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:34:36.552418458Z     config.load()
2025-10-14T02:34:36.552424019Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:34:36.552521815Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:34:36.552526604Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.552528638Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:34:36.552571890Z     module = importlib.import_module(module_str)
2025-10-14T02:34:36.552588902Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.552595445Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:34:36.552645320Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:34:36.552663795Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.552666620Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:34:36.552669696Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:34:36.552672120Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:34:36.552674655Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:34:36.552677381Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:34:36.552682791Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:34:36.552689724Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:34:36.552899753Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:34:36.552916755Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:34:36.552981398Z     from ..services.rag_service import rag_service
2025-10-14T02:34:36.552985867Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:34:36.553043576Z     from .pinecone_service import pinecone_service
2025-10-14T02:34:36.553047674Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:34:36.553116345Z     pinecone_service = PineconeService()
2025-10-14T02:34:36.553120703Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:34:36.553123088Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:34:36.553168844Z     self._initialize_client()
2025-10-14T02:34:36.553179976Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:34:36.553229459Z     raise e
2025-10-14T02:34:36.553233597Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:34:36.553279865Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:34:36.553291007Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:34:44.426155342Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:34:44.426186190Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:34:44.726171990Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:34:44.726196186Z Hair Change 모듈 로드 성공
2025-10-14T02:34:48.699658633Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:48.699687939Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:34:48.760951584Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:34:48.760967494Z   warnings.warn(
2025-10-14T02:34:48.761016837Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:49.988418411Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:34:50.073584421Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:50.073615350Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:34:50.073914218Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:34:50.073926131Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:34:50.073935749Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:50.137372442Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:34:50.137402730Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:50.137412769Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:34:50.172387723Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:51.183218640Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:34:51.265984300Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:51.266012473Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:34:51.266203206Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:34:51.266211151Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:34:51.266214437Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:51.327754356Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:34:51.327784394Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:51.327810203Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:34:51.383469829Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:34:52.067460110Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:34:52.135372928Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:34:52.135398166Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:34:52.135637050Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:34:52.135651117Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:34:52.135657529Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:34:52.198144849Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:34:52.198177120Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:34:52.214968204Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:34:52.215398992Z Traceback (most recent call last):
2025-10-14T02:34:52.215409783Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:34:52.215420002Z     sys.exit(main())
2025-10-14T02:34:52.215423238Z              ^^^^^^
2025-10-14T02:34:52.215437726Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:34:52.215743788Z     return self.main(*args, **kwargs)
2025-10-14T02:34:52.215766891Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.215772993Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:34:52.215891859Z     rv = self.invoke(ctx)
2025-10-14T02:34:52.215900936Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.215903972Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:34:52.216115744Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:34:52.216130001Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.216136123Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:34:52.216184875Z     return callback(*args, **kwargs)
2025-10-14T02:34:52.216193602Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.216196758Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:34:52.216353346Z     run(
2025-10-14T02:34:52.216367983Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:34:52.216391308Z     server.run()
2025-10-14T02:34:52.216400405Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:34:52.216443357Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:34:52.216456932Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.216459858Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:34:52.216531063Z     return runner.run(main)
2025-10-14T02:34:52.216538978Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.216543828Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:34:52.216587440Z     return self._loop.run_until_complete(task)
2025-10-14T02:34:52.216592310Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.216594714Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:34:52.216695025Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:34:52.216740211Z     await self._serve(sockets)
2025-10-14T02:34:52.216764296Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:34:52.216806817Z     config.load()
2025-10-14T02:34:52.216811356Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:34:52.216937095Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:34:52.216944729Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.216947805Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:34:52.216963855Z     module = importlib.import_module(module_str)
2025-10-14T02:34:52.216980738Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.216984014Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:34:52.217044128Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:34:52.217059147Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.217061972Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:34:52.217065168Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:34:52.217067843Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:34:52.217070298Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:34:52.217072622Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:34:52.217076921Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:34:52.217079375Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:34:52.217309292Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:34:52.217322858Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:34:52.217361080Z     from ..services.rag_service import rag_service
2025-10-14T02:34:52.217368294Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:34:52.217435241Z     from .pinecone_service import pinecone_service
2025-10-14T02:34:52.217438828Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:34:52.217498281Z     pinecone_service = PineconeService()
2025-10-14T02:34:52.217509132Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:34:52.217512097Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:34:52.217558986Z     self._initialize_client()
2025-10-14T02:34:52.217561682Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:34:52.217617037Z     raise e
2025-10-14T02:34:52.217620153Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:34:52.217664116Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:34:52.217680096Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:00.202199152Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:35:00.202234038Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:35:00.503570324Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:35:00.503616262Z Hair Change 모듈 로드 성공
2025-10-14T02:35:04.464641437Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:04.464680642Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:35:04.531518237Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:35:04.531551380Z   warnings.warn(
2025-10-14T02:35:04.531560467Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:05.749537213Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:35:05.833907932Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:05.833935314Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:35:05.834204997Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:05.834218582Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:35:05.834269710Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:05.897656408Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:35:05.897684341Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:05.897854054Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:35:05.936348856Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:06.948203268Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:35:07.029902801Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:07.029917489Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:35:07.030173977Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:07.030192141Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:35:07.030221397Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:07.091474862Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:35:07.091523184Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:07.091567217Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:35:07.132505092Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:07.815238965Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:35:07.881896579Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:07.881910274Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:35:07.882140222Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:07.882151593Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:35:07.882178304Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:07.944283126Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:35:07.944303846Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:35:07.960876635Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:07.961319837Z Traceback (most recent call last):
2025-10-14T02:35:07.961331449Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:35:07.961373249Z     sys.exit(main())
2025-10-14T02:35:07.961395651Z              ^^^^^^
2025-10-14T02:35:07.961398898Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:35:07.961611622Z     return self.main(*args, **kwargs)
2025-10-14T02:35:07.961618775Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.961621290Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:35:07.961829977Z     rv = self.invoke(ctx)
2025-10-14T02:35:07.961839725Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.961842330Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:35:07.962018084Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:35:07.962023865Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.962026410Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:35:07.962170864Z     return callback(*args, **kwargs)
2025-10-14T02:35:07.962176495Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.962179010Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:35:07.962293688Z     run(
2025-10-14T02:35:07.962299499Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:35:07.962382747Z     server.run()
2025-10-14T02:35:07.962390101Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:35:07.962499288Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:35:07.962507684Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.962510810Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:35:07.962558491Z     return runner.run(main)
2025-10-14T02:35:07.962566847Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.962570954Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:35:07.962644645Z     return self._loop.run_until_complete(task)
2025-10-14T02:35:07.962662929Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.962665725Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:35:07.962781775Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:35:07.962836539Z     await self._serve(sockets)
2025-10-14T02:35:07.962851758Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:35:07.962909197Z     config.load()
2025-10-14T02:35:07.962917733Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:35:07.963054573Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:35:07.963064111Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.963067217Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:35:07.963096383Z     module = importlib.import_module(module_str)
2025-10-14T02:35:07.963114137Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.963117633Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:35:07.963180933Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:35:07.963211251Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.963214187Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:35:07.963217373Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:35:07.963219697Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:35:07.963222042Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:35:07.963226300Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:35:07.963229145Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:35:07.963242140Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:35:07.963449143Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:35:07.963471375Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:35:07.963543282Z     from ..services.rag_service import rag_service
2025-10-14T02:35:07.963553361Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:35:07.963628383Z     from .pinecone_service import pinecone_service
2025-10-14T02:35:07.963632591Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:35:07.963723855Z     pinecone_service = PineconeService()
2025-10-14T02:35:07.963739735Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:35:07.963743252Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:35:07.963800360Z     self._initialize_client()
2025-10-14T02:35:07.963813936Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:35:07.963871305Z     raise e
2025-10-14T02:35:07.963887195Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:35:07.963941639Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:35:07.963955565Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:15.958775613Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:35:15.958814187Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:35:16.259831006Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:35:16.259856033Z Hair Change 모듈 로드 성공
2025-10-14T02:35:20.235486460Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:20.235526676Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:35:20.300995080Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:35:20.301032070Z   warnings.warn(
2025-10-14T02:35:20.301035477Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:21.530667348Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:35:21.616849649Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:21.616876420Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:35:21.617168936Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:21.617183594Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:35:21.617189906Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:21.680818023Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:35:21.680849352Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:21.680853110Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:35:21.721410521Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:22.736874531Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:35:22.819164537Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:22.819190666Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:35:22.819405515Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:22.819421896Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:35:22.819425863Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:22.880774149Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:35:22.880801871Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:22.880810498Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:35:22.919038433Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:23.606595291Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:35:23.673807357Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:23.673833607Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:35:23.674034469Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:23.674041983Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:35:23.674050409Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:23.735936206Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:35:23.735960993Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:35:23.752340946Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:23.752735916Z Traceback (most recent call last):
2025-10-14T02:35:23.752745264Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:35:23.752790991Z     sys.exit(main())
2025-10-14T02:35:23.752801491Z              ^^^^^^
2025-10-14T02:35:23.752804657Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:35:23.753020296Z     return self.main(*args, **kwargs)
2025-10-14T02:35:23.753026588Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.753029033Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:35:23.753216209Z     rv = self.invoke(ctx)
2025-10-14T02:35:23.753222010Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.753224454Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:35:23.753389508Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:35:23.753395219Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.753397653Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:35:23.753510788Z     return callback(*args, **kwargs)
2025-10-14T02:35:23.753517481Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.753519785Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:35:23.753640555Z     run(
2025-10-14T02:35:23.753650664Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:35:23.753704396Z     server.run()
2025-10-14T02:35:23.753719615Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:35:23.753800509Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:35:23.753808193Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.753811259Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:35:23.753837689Z     return runner.run(main)
2025-10-14T02:35:23.753845054Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.753847478Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:35:23.753919936Z     return self._loop.run_until_complete(task)
2025-10-14T02:35:23.753924264Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.753926889Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:35:23.754010638Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:35:23.754048209Z     await self._serve(sockets)
2025-10-14T02:35:23.754061755Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:35:23.754123362Z     config.load()
2025-10-14T02:35:23.754131688Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:35:23.754208524Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:35:23.754215207Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.754217231Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:35:23.754258499Z     module = importlib.import_module(module_str)
2025-10-14T02:35:23.754274499Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.754276694Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:35:23.754328492Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:35:23.754349272Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.754351356Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:35:23.754353550Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:35:23.754355483Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:35:23.754357477Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:35:23.754359371Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:35:23.754364410Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:35:23.754370933Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:35:23.754571784Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:35:23.754584609Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:35:23.754640605Z     from ..services.rag_service import rag_service
2025-10-14T02:35:23.754649743Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:35:23.754703975Z     from .pinecone_service import pinecone_service
2025-10-14T02:35:23.754706660Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:35:23.754820928Z     pinecone_service = PineconeService()
2025-10-14T02:35:23.754833171Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:35:23.754836267Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:35:23.754853329Z     self._initialize_client()
2025-10-14T02:35:23.754857537Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:35:23.754912191Z     raise e
2025-10-14T02:35:23.754916610Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:35:23.754956746Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:35:23.754969680Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:31.763260243Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:35:31.763291262Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:35:32.064225855Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:35:32.064254499Z Hair Change 모듈 로드 성공
2025-10-14T02:35:36.033449047Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:36.033478944Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:35:36.118553641Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:35:36.118584700Z   warnings.warn(
2025-10-14T02:35:36.118591022Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:37.344358731Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:35:37.429084044Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:37.429106607Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:35:37.429404493Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:37.429412699Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:35:37.429421696Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:37.493151896Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:35:37.493169560Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:37.493210087Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:35:37.526033183Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:38.542777496Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:35:38.625375086Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:38.625406656Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:35:38.625644087Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:38.625660198Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:35:38.625666710Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:38.687488655Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:35:38.687530805Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:38.687562455Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:35:38.727171224Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:39.416235666Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:35:39.483811424Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:39.483839788Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:35:39.484038776Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:39.484042954Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:35:39.484045980Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:39.546734792Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:35:39.546749039Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:35:39.563505838Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:39.563954491Z Traceback (most recent call last):
2025-10-14T02:35:39.563960492Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:35:39.563968137Z     sys.exit(main())
2025-10-14T02:35:39.563992322Z              ^^^^^^
2025-10-14T02:35:39.563995498Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:35:39.564218873Z     return self.main(*args, **kwargs)
2025-10-14T02:35:39.564221618Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.564223993Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:35:39.564411068Z     rv = self.invoke(ctx)
2025-10-14T02:35:39.564414314Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.564416679Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:35:39.564585430Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:35:39.564588075Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.564590389Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:35:39.564724333Z     return callback(*args, **kwargs)
2025-10-14T02:35:39.564731377Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.564735134Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:35:39.564863989Z     run(
2025-10-14T02:35:39.564873397Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:35:39.564906209Z     server.run()
2025-10-14T02:35:39.564913463Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:35:39.564970922Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:35:39.564992864Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.564996270Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:35:39.565038941Z     return runner.run(main)
2025-10-14T02:35:39.565052457Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.565057316Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:35:39.565109525Z     return self._loop.run_until_complete(task)
2025-10-14T02:35:39.565125215Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.565127860Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:35:39.565217951Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:35:39.565261274Z     await self._serve(sockets)
2025-10-14T02:35:39.565274499Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:35:39.565322059Z     config.load()
2025-10-14T02:35:39.565329032Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:35:39.565426698Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:35:39.565433601Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.565436036Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:35:39.565480170Z     module = importlib.import_module(module_str)
2025-10-14T02:35:39.565492523Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.565496941Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:35:39.565556835Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:35:39.565566523Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.565569079Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:35:39.565571493Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:35:39.565573837Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:35:39.565616238Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:35:39.565639843Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:35:39.565645544Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:35:39.565650193Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:35:39.565804556Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:35:39.565816919Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:35:39.565873487Z     from ..services.rag_service import rag_service
2025-10-14T02:35:39.565902452Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:35:39.565951295Z     from .pinecone_service import pinecone_service
2025-10-14T02:35:39.565955803Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:35:39.566020366Z     pinecone_service = PineconeService()
2025-10-14T02:35:39.566027510Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:35:39.566029954Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:35:39.566079999Z     self._initialize_client()
2025-10-14T02:35:39.566082564Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:35:39.566135615Z     raise e
2025-10-14T02:35:39.566138651Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:35:39.566186562Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:35:39.566193605Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:47.488083071Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:35:47.488110092Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:35:47.788617824Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:35:47.788636700Z Hair Change 모듈 로드 성공
2025-10-14T02:35:51.830329529Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:51.830349266Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:35:51.896845232Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:35:51.896864970Z   warnings.warn(
2025-10-14T02:35:51.896908623Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:53.117053368Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:35:53.201605031Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:53.201618346Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:35:53.201913287Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:35:53.201942111Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:35:53.201972479Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:53.266274487Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:35:53.266319933Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:53.266324001Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:35:53.297918091Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:54.311419262Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:35:54.394304118Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:54.394332532Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:35:54.394539595Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:35:54.394547019Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:35:54.394550125Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:54.456105594Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:35:54.456133557Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:54.456138938Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:35:54.492399344Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:35:55.177843919Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:35:55.245466856Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:35:55.245497955Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:35:55.245727050Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:35:55.245739313Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:35:55.245742690Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:35:55.307935059Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:35:55.307967531Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:35:55.324616885Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:35:55.325083512Z Traceback (most recent call last):
2025-10-14T02:35:55.325104091Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:35:55.325114441Z     sys.exit(main())
2025-10-14T02:35:55.325117637Z              ^^^^^^
2025-10-14T02:35:55.325120172Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:35:55.325375758Z     return self.main(*args, **kwargs)
2025-10-14T02:35:55.325382841Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.325385967Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:35:55.325586057Z     rv = self.invoke(ctx)
2025-10-14T02:35:55.325593301Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.325596387Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:35:55.325747093Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:35:55.325754848Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.325757443Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:35:55.325865658Z     return callback(*args, **kwargs)
2025-10-14T02:35:55.325868664Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.325871219Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:35:55.325962923Z     run(
2025-10-14T02:35:55.325966099Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:35:55.326062773Z     server.run()
2025-10-14T02:35:55.326065869Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:35:55.326123298Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:35:55.326151121Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.326153816Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:35:55.326185897Z     return runner.run(main)
2025-10-14T02:35:55.326204562Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.326207257Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:35:55.326301707Z     return self._loop.run_until_complete(task)
2025-10-14T02:35:55.326322807Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.326328708Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:35:55.326385055Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:35:55.326413670Z     await self._serve(sockets)
2025-10-14T02:35:55.326422006Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:35:55.326491337Z     config.load()
2025-10-14T02:35:55.326498962Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:35:55.326612147Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:35:55.326620452Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.326623589Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:35:55.326649979Z     module = importlib.import_module(module_str)
2025-10-14T02:35:55.326656752Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.326661541Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:35:55.326723208Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:35:55.326758695Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.326765508Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:35:55.326770077Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:35:55.326774515Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:35:55.326779334Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:35:55.326783913Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:35:55.326800725Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:35:55.326805574Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:35:55.326964256Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:35:55.326989864Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:35:55.327042775Z     from ..services.rag_service import rag_service
2025-10-14T02:35:55.327046793Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:35:55.327107608Z     from .pinecone_service import pinecone_service
2025-10-14T02:35:55.327111886Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:35:55.327178633Z     pinecone_service = PineconeService()
2025-10-14T02:35:55.327181639Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:35:55.327184094Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:35:55.327231714Z     self._initialize_client()
2025-10-14T02:35:55.327234950Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:35:55.327288632Z     raise e
2025-10-14T02:35:55.327291307Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:35:55.327337505Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:35:55.327344709Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:03.274829306Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:36:03.274858943Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:36:03.576382495Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:36:03.576410588Z Hair Change 모듈 로드 성공
2025-10-14T02:36:07.556861203Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:07.556892593Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:36:07.625158823Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:36:07.625172078Z   warnings.warn(
2025-10-14T02:36:07.625175404Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:08.847129708Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:36:08.935248398Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:08.935282353Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:36:08.935562966Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:08.935579327Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:36:08.935582984Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:08.998792566Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:36:08.998832492Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:08.998836349Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:36:09.031689482Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:10.047611592Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:36:10.129844650Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:10.129871320Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:36:10.130052916Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:10.130060530Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:36:10.130063666Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:10.191084309Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:36:10.191102984Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:10.191132721Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:36:10.227380654Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:10.913138252Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:36:10.980682671Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:10.980696187Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:36:10.980938938Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:10.980950660Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:36:10.980953896Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:11.042702302Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:36:11.042727409Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:36:11.059207553Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:11.059620507Z Traceback (most recent call last):
2025-10-14T02:36:11.059627551Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:36:11.059636357Z     sys.exit(main())
2025-10-14T02:36:11.059656065Z              ^^^^^^
2025-10-14T02:36:11.059659281Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:36:11.059923453Z     return self.main(*args, **kwargs)
2025-10-14T02:36:11.059934644Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.059939874Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:36:11.060120106Z     rv = self.invoke(ctx)
2025-10-14T02:36:11.060127380Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.060130436Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:36:11.060295420Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:36:11.060302363Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.060305449Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:36:11.060387735Z     return callback(*args, **kwargs)
2025-10-14T02:36:11.060391041Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.060393476Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:36:11.060527360Z     run(
2025-10-14T02:36:11.060534394Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:36:11.060576734Z     server.run()
2025-10-14T02:36:11.060580071Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:36:11.060633572Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:36:11.060658329Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.060661115Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:36:11.060716901Z     return runner.run(main)
2025-10-14T02:36:11.060736528Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.060739674Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:36:11.060784339Z     return self._loop.run_until_complete(task)
2025-10-14T02:36:11.060795099Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.060797634Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:36:11.060887565Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:36:11.060930236Z     await self._serve(sockets)
2025-10-14T02:36:11.060939143Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:36:11.060990901Z     config.load()
2025-10-14T02:36:11.061002423Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:36:11.061100119Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:36:11.061103746Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.061106250Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:36:11.061147609Z     module = importlib.import_module(module_str)
2025-10-14T02:36:11.061154743Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.061157197Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:36:11.061218714Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:36:11.061255043Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.061257899Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:36:11.061260724Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:36:11.061263058Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:36:11.061265473Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:36:11.061267867Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:36:11.061270192Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:36:11.061272536Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:36:11.061452679Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:36:11.061459542Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:36:11.061528112Z     from ..services.rag_service import rag_service
2025-10-14T02:36:11.061530837Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:36:11.061592074Z     from .pinecone_service import pinecone_service
2025-10-14T02:36:11.061596552Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:36:11.061664261Z     pinecone_service = PineconeService()
2025-10-14T02:36:11.061666886Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:36:11.061669300Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:36:11.061724034Z     self._initialize_client()
2025-10-14T02:36:11.061780431Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:36:11.061810198Z     raise e
2025-10-14T02:36:11.061816610Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:36:11.061847940Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:36:11.061852779Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:19.042120466Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:36:19.042152186Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:36:19.344763064Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:36:19.344790988Z Hair Change 모듈 로드 성공
2025-10-14T02:36:23.348385137Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:23.348421325Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:36:23.418004898Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:36:23.418034745Z   warnings.warn(
2025-10-14T02:36:23.418071274Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:24.651835648Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:36:24.736624522Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:24.736646112Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:36:24.736938819Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:24.736960910Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:36:24.736977512Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:24.799896742Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:36:24.799929805Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:24.799964661Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:36:24.836209499Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:25.856098506Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:36:25.938222447Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:25.938235421Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:36:25.938465228Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:25.938473003Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:36:25.938504212Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:25.999611549Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:36:25.999653258Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:25.999726067Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:36:26.032456567Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:26.712249282Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:36:26.779773251Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:26.779800513Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:36:26.779983952Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:26.779989973Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:36:26.780039107Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:26.842250051Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:36:26.842268266Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:36:26.858793374Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:26.859238239Z Traceback (most recent call last):
2025-10-14T02:36:26.859248619Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:36:26.859261895Z     sys.exit(main())
2025-10-14T02:36:26.859292633Z              ^^^^^^
2025-10-14T02:36:26.859297342Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:36:26.859546796Z     return self.main(*args, **kwargs)
2025-10-14T02:36:26.859557116Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.859561714Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:36:26.859759400Z     rv = self.invoke(ctx)
2025-10-14T02:36:26.859777835Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.859782884Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:36:26.859960622Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:36:26.859970942Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.859975571Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:36:26.860085910Z     return callback(*args, **kwargs)
2025-10-14T02:36:26.860091160Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.860094967Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:36:26.860236416Z     run(
2025-10-14T02:36:26.860247427Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:36:26.860305117Z     server.run()
2025-10-14T02:36:26.860310287Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:36:26.860386441Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:36:26.860404305Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.860409014Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:36:26.860475861Z     return runner.run(main)
2025-10-14T02:36:26.860480991Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.860485008Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:36:26.860563217Z     return self._loop.run_until_complete(task)
2025-10-14T02:36:26.860569028Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.860572906Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:36:26.860678556Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:36:26.860740734Z     await self._serve(sockets)
2025-10-14T02:36:26.860756595Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:36:26.860813062Z     config.load()
2025-10-14T02:36:26.860823812Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:36:26.861000438Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:36:26.861022560Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.861028882Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:36:26.861033871Z     module = importlib.import_module(module_str)
2025-10-14T02:36:26.861043229Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.861048078Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:36:26.861092753Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:36:26.861117180Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.861125255Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:36:26.861130926Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:36:26.861135444Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:36:26.861140043Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:36:26.861161914Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:36:26.861166764Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:36:26.861171242Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:36:26.861357406Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:36:26.861363538Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:36:26.861443179Z     from ..services.rag_service import rag_service
2025-10-14T02:36:26.861447738Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:36:26.861520185Z     from .pinecone_service import pinecone_service
2025-10-14T02:36:26.861524754Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:36:26.861597613Z     pinecone_service = PineconeService()
2025-10-14T02:36:26.861607311Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:36:26.861610968Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:36:26.861700508Z     self._initialize_client()
2025-10-14T02:36:26.861733701Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:36:26.861762546Z     raise e
2025-10-14T02:36:26.861768397Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:36:26.861825606Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:36:26.861848449Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:34.817333769Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:36:34.817364818Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:36:35.119751991Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:36:35.119775956Z Hair Change 모듈 로드 성공
2025-10-14T02:36:39.147471008Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:39.147497459Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:36:39.210122490Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:36:39.210138180Z   warnings.warn(
2025-10-14T02:36:39.210168357Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:40.440528712Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:36:40.527746932Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:40.527780546Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:36:40.528011204Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:40.528021444Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:36:40.528025652Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:40.591747227Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:36:40.591780079Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:40.591784868Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:36:40.630272997Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:41.642821748Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:36:41.727590454Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:41.727628516Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:36:41.727779874Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:41.727786647Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:36:41.727789542Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:41.789063977Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:36:41.789093563Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:41.789103953Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:36:41.821355072Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:42.507918442Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:36:42.576146079Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:42.576172699Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:36:42.576380744Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:42.576391194Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:36:42.576394500Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:42.637946423Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:36:42.637965439Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:36:42.654611758Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:42.655040623Z Traceback (most recent call last):
2025-10-14T02:36:42.655067463Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:36:42.655071090Z     sys.exit(main())
2025-10-14T02:36:42.655076661Z              ^^^^^^
2025-10-14T02:36:42.655079637Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:36:42.655326896Z     return self.main(*args, **kwargs)
2025-10-14T02:36:42.655341394Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.655347927Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:36:42.655453267Z     rv = self.invoke(ctx)
2025-10-14T02:36:42.655463246Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.655466492Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:36:42.655648888Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:36:42.655656994Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.655660049Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:36:42.655749439Z     return callback(*args, **kwargs)
2025-10-14T02:36:42.655758056Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.655760430Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:36:42.655904614Z     run(
2025-10-14T02:36:42.655912669Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:36:42.655953036Z     server.run()
2025-10-14T02:36:42.655956663Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:36:42.656007730Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:36:42.656037657Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.656040472Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:36:42.656091680Z     return runner.run(main)
2025-10-14T02:36:42.656100286Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.656103442Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:36:42.656153758Z     return self._loop.run_until_complete(task)
2025-10-14T02:36:42.656166752Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.656170990Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:36:42.656277583Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:36:42.656309223Z     await self._serve(sockets)
2025-10-14T02:36:42.656320444Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:36:42.656371932Z     config.load()
2025-10-14T02:36:42.656376721Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:36:42.656474527Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:36:42.656478985Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.656482372Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:36:42.656532698Z     module = importlib.import_module(module_str)
2025-10-14T02:36:42.656537006Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.656540412Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:36:42.656603111Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:36:42.656607400Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.656618591Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:36:42.656623560Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:36:42.656627047Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:36:42.656630794Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:36:42.656634160Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:36:42.656637567Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:36:42.656644340Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:36:42.656853447Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:36:42.656863837Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:36:42.656931385Z     from ..services.rag_service import rag_service
2025-10-14T02:36:42.656935443Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:36:42.657000256Z     from .pinecone_service import pinecone_service
2025-10-14T02:36:42.657004023Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:36:42.657070790Z     pinecone_service = PineconeService()
2025-10-14T02:36:42.657074728Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:36:42.657078475Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:36:42.657125825Z     self._initialize_client()
2025-10-14T02:36:42.657130213Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:36:42.657184917Z     raise e
2025-10-14T02:36:42.657188824Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:36:42.657234130Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:36:42.657237887Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:50.579731000Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:36:50.579770165Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:36:50.880007963Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:36:50.880041557Z Hair Change 모듈 로드 성공
2025-10-14T02:36:54.926134226Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:54.926163572Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:36:54.996912900Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:36:54.996929150Z   warnings.warn(
2025-10-14T02:36:54.996965760Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:56.221031285Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:36:56.306317474Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:56.306354915Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:36:56.306606172Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:36:56.306620910Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:36:56.306636931Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:56.371061571Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:36:56.371097169Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:56.371116456Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:36:56.407311418Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:57.426460219Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:36:57.508668139Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:57.508689911Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:36:57.508968189Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:36:57.508991664Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:36:57.508997635Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:57.570354226Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:36:57.570379544Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:57.570396627Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:36:57.611954760Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:36:58.292387150Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:36:58.359511631Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:36:58.359530116Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:36:58.359756967Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:36:58.359776794Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:36:58.359782355Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:36:58.422265156Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:36:58.422287358Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:36:58.438949036Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:36:58.439342614Z Traceback (most recent call last):
2025-10-14T02:36:58.439349598Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:36:58.439380306Z     sys.exit(main())
2025-10-14T02:36:58.439385626Z              ^^^^^^
2025-10-14T02:36:58.439390345Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:36:58.439672331Z     return self.main(*args, **kwargs)
2025-10-14T02:36:58.439686107Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.439691978Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:36:58.439834749Z     rv = self.invoke(ctx)
2025-10-14T02:36:58.439846191Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.439851000Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:36:58.440033607Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:36:58.440047123Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440052994Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:36:58.440117025Z     return callback(*args, **kwargs)
2025-10-14T02:36:58.440122466Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440127055Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:36:58.440231012Z     run(
2025-10-14T02:36:58.440238326Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:36:58.440311926Z     server.run()
2025-10-14T02:36:58.440317206Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:36:58.440357222Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:36:58.440386868Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440391998Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:36:58.440425642Z     return runner.run(main)
2025-10-14T02:36:58.440442614Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440447544Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:36:58.440507447Z     return self._loop.run_until_complete(task)
2025-10-14T02:36:58.440514992Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440519601Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:36:58.440645299Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:36:58.440666510Z     await self._serve(sockets)
2025-10-14T02:36:58.440676799Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:36:58.440724620Z     config.load()
2025-10-14T02:36:58.440740550Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:36:58.440824680Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:36:58.440831964Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440836964Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:36:58.440877080Z     module = importlib.import_module(module_str)
2025-10-14T02:36:58.440886007Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440890976Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:36:58.440965788Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:36:58.440972491Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.440977300Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:36:58.440982229Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:36:58.440986678Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:36:58.441001376Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:36:58.441006245Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:36:58.441010894Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:36:58.441015432Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:36:58.441177330Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:36:58.441184894Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:36:58.441256360Z     from ..services.rag_service import rag_service
2025-10-14T02:36:58.441263594Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:36:58.441315693Z     from .pinecone_service import pinecone_service
2025-10-14T02:36:58.441322546Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:36:58.441383141Z     pinecone_service = PineconeService()
2025-10-14T02:36:58.441389774Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:36:58.441394803Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:36:58.441440270Z     self._initialize_client()
2025-10-14T02:36:58.441446963Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:36:58.441498901Z     raise e
2025-10-14T02:36:58.441506215Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:36:58.441548606Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:36:58.441555749Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:37:06.365889669Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:37:06.365930798Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:37:06.667019654Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:37:06.667047346Z Hair Change 모듈 로드 성공
2025-10-14T02:37:10.652391540Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:37:10.652417489Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:37:10.722104829Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:37:10.722128384Z   warnings.warn(
2025-10-14T02:37:10.722131459Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:11.942404018Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:37:12.028059929Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:12.028085838Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:37:12.028345591Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:37:12.028372362Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:37:12.028407770Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:12.092116380Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:37:12.092171885Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:37:12.092206561Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:37:12.125696504Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:13.137162387Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:37:13.219048135Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:13.219067261Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:37:13.219269876Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:37:13.219278182Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:37:13.219282169Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:13.281422880Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:37:13.281444031Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:37:13.281460863Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:37:13.316543021Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:13.994185440Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:37:14.061592578Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:14.061613778Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:37:14.061846660Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:37:14.061859895Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:37:14.061863252Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:14.124253727Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:37:14.124276250Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:37:14.140731126Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:37:14.141125114Z Traceback (most recent call last):
2025-10-14T02:37:14.141139010Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:37:14.141144972Z     sys.exit(main())
2025-10-14T02:37:14.141149791Z              ^^^^^^
2025-10-14T02:37:14.141154410Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:37:14.141393494Z     return self.main(*args, **kwargs)
2025-10-14T02:37:14.141407511Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.141413442Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:37:14.141544341Z     rv = self.invoke(ctx)
2025-10-14T02:37:14.141550523Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.141555061Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:37:14.141757706Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:37:14.141779247Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.141785309Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:37:14.141836395Z     return callback(*args, **kwargs)
2025-10-14T02:37:14.141844281Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.141847507Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:37:14.141945783Z     run(
2025-10-14T02:37:14.141953578Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:37:14.142026276Z     server.run()
2025-10-14T02:37:14.142032338Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:37:14.142080559Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:37:14.142100517Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.142116327Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:37:14.142146294Z     return runner.run(main)
2025-10-14T02:37:14.142151424Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.142153999Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:37:14.142224493Z     return self._loop.run_until_complete(task)
2025-10-14T02:37:14.142231176Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.142235724Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:37:14.142316538Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:37:14.142356294Z     await self._serve(sockets)
2025-10-14T02:37:14.142364609Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:37:14.142428110Z     config.load()
2025-10-14T02:37:14.142435143Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:37:14.142518341Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:37:14.142522610Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.142525585Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:37:14.142578616Z     module = importlib.import_module(module_str)
2025-10-14T02:37:14.142585419Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.142590168Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:37:14.142641104Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:37:14.142656764Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.142659519Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:37:14.142662104Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:37:14.142664489Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:37:14.142666944Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:37:14.142669308Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:37:14.142674167Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:37:14.142677865Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:37:14.142909004Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:37:14.142920425Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:37:14.142961784Z     from ..services.rag_service import rag_service
2025-10-14T02:37:14.142964820Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:37:14.143026196Z     from .pinecone_service import pinecone_service
2025-10-14T02:37:14.143028972Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:37:14.143090037Z     pinecone_service = PineconeService()
2025-10-14T02:37:14.143106529Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:37:14.143109114Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:37:14.143160201Z     self._initialize_client()
2025-10-14T02:37:14.143167164Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:37:14.143209685Z     raise e
2025-10-14T02:37:14.143212721Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:37:14.143257696Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:37:14.143273997Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:37:22.109645792Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:37:22.109689935Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:37:22.409583621Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:37:22.409604801Z Hair Change 모듈 로드 성공
2025-10-14T02:37:26.392697827Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:37:26.392753312Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:37:26.455216586Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:37:26.455237245Z   warnings.warn(
2025-10-14T02:37:26.455246673Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:27.680576210Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:37:27.765300271Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:27.765318395Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:37:27.765612504Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:37:27.765627412Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:37:27.765632602Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:27.829513018Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:37:27.829540901Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:37:27.829576369Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:37:27.867283775Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:28.880528468Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:37:28.963303155Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:28.963334354Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:37:28.963567307Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:37:28.963581694Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:37:28.963587756Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:29.024878502Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:37:29.024916273Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:37:29.024958263Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:37:29.060468074Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:29.752697229Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:37:29.820000619Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:29.820019195Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:37:29.820234393Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:37:29.820242218Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:37:29.820275141Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:29.882413137Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:37:29.882456870Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:37:29.898951991Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:37:29.899373182Z Traceback (most recent call last):
2025-10-14T02:37:29.899381157Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:37:29.899418398Z     sys.exit(main())
2025-10-14T02:37:29.899440259Z              ^^^^^^
2025-10-14T02:37:29.899447172Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:37:29.899686828Z     return self.main(*args, **kwargs)
2025-10-14T02:37:29.899692969Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.899696456Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:37:29.899932354Z     rv = self.invoke(ctx)
2025-10-14T02:37:29.899943596Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.899946751Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:37:29.900134849Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:37:29.900140880Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.900144297Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:37:29.900304441Z     return callback(*args, **kwargs)
2025-10-14T02:37:29.900309641Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.900313017Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:37:29.900437584Z     run(
2025-10-14T02:37:29.900443265Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:37:29.900541231Z     server.run()
2025-10-14T02:37:29.900546962Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:37:29.900612116Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:37:29.900651631Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.900657682Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:37:29.900702507Z     return runner.run(main)
2025-10-14T02:37:29.900722455Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.900729899Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:37:29.900796817Z     return self._loop.run_until_complete(task)
2025-10-14T02:37:29.900820221Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.900823036Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:37:29.900924088Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:37:29.900969465Z     await self._serve(sockets)
2025-10-14T02:37:29.900989152Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:37:29.901046211Z     config.load()
2025-10-14T02:37:29.901053044Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:37:29.901157803Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:37:29.901172811Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.901175456Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:37:29.901230942Z     module = importlib.import_module(module_str)
2025-10-14T02:37:29.901253254Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.901256009Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:37:29.901323187Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:37:29.901361319Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.901364315Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:37:29.901366860Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:37:29.901375637Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:37:29.901378211Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:37:29.901380546Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:37:29.901382920Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:37:29.901388882Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:37:29.901588661Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:37:29.901606786Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:37:29.901676097Z     from ..services.rag_service import rag_service
2025-10-14T02:37:29.901682490Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:37:29.901776809Z     from .pinecone_service import pinecone_service
2025-10-14T02:37:29.901787830Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:37:29.901849477Z     pinecone_service = PineconeService()
2025-10-14T02:37:29.901869275Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:37:29.901871960Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:37:29.901930190Z     self._initialize_client()
2025-10-14T02:37:29.901938546Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:37:29.902008459Z     raise e
2025-10-14T02:37:29.902014030Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:37:29.902079614Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:37:29.902103369Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:37:37.877063713Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:37:37.877094852Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요
2025-10-14T02:37:38.174819496Z Hair Change: API 키가 설정되지 않음
2025-10-14T02:37:38.174847750Z Hair Change 모듈 로드 성공
2025-10-14T02:37:42.204258391Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:37:42.204295833Z INFO:root:Loaded built-in ViT-B-32 model config.
2025-10-14T02:37:42.272468555Z /usr/local/lib/python3.11/site-packages/open_clip/factory.py:450: UserWarning: QuickGELU mismatch between final model config (quick_gelu=False) and pretrained tag 'openai' (quick_gelu=True).
2025-10-14T02:37:42.272489935Z   warnings.warn(
2025-10-14T02:37:42.272493091Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:43.496377843Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch32_clip_224.openai/snapshots/a6f597a30f7b82c51704746581f9a4e41421e878/open_clip_model.safetensors
2025-10-14T02:37:43.581704719Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:43.581746979Z INFO:root:Model ViT-B-32 creation process complete.
2025-10-14T02:37:43.582220188Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-32
2025-10-14T02:37:43.582227723Z INFO:root:Attempting to load config from built-in: ViT-B-32
2025-10-14T02:37:43.582231459Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:43.645728698Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-32 로드 완료 (기본 모델 - 빠르고 안정적)
2025-10-14T02:37:43.645764877Z INFO:root:Parsing model identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:37:43.645768874Z INFO:root:Loaded built-in ViT-B-16 model config.
2025-10-14T02:37:43.677723881Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:44.688678893Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--vit_base_patch16_clip_224.openai/snapshots/977e3dd0ec55ab8da155f2fbeb6b5f54948b6e3d/open_clip_model.safetensors
2025-10-14T02:37:44.771457858Z INFO:root:Final image preprocessing configuration set: {'size': (224, 224), 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:44.771468699Z INFO:root:Model ViT-B-16 creation process complete.
2025-10-14T02:37:44.771741607Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: ViT-B-16
2025-10-14T02:37:44.771755053Z INFO:root:Attempting to load config from built-in: ViT-B-16
2025-10-14T02:37:44.771776764Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:44.833504060Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] ViT-B-16 로드 완료 (고해상도 모델 - 세밀한 특징)
2025-10-14T02:37:44.833547372Z INFO:root:Parsing model identifier. Schema: None, Identifier: RN50
2025-10-14T02:37:44.833585965Z INFO:root:Loaded built-in RN50 model config.
2025-10-14T02:37:44.869559687Z INFO:root:Instantiating model architecture: CLIP
2025-10-14T02:37:45.560246782Z INFO:root:Loading full pretrained weights from: /root/.cache/huggingface/hub/models--timm--resnet50_clip.openai/snapshots/ec3d92cf63a5f9d591f0d611b736895966c73076/open_clip_model.safetensors
2025-10-14T02:37:45.628274730Z INFO:root:Final image preprocessing configuration set: {'size': 224, 'mode': 'RGB', 'mean': (0.48145466, 0.4578275, 0.40821073), 'std': (0.26862954, 0.26130258, 0.27577711), 'interpolation': 'bicubic', 'resize_mode': 'shortest', 'fill_color': 0}
2025-10-14T02:37:45.628286552Z INFO:root:Model RN50 creation process complete.
2025-10-14T02:37:45.628574088Z INFO:root:Parsing tokenizer identifier. Schema: None, Identifier: RN50
2025-10-14T02:37:45.628581202Z INFO:root:Attempting to load config from built-in: RN50
2025-10-14T02:37:45.628584358Z INFO:root:Using default SimpleTokenizer.
2025-10-14T02:37:45.690425509Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] RN50 로드 완료 (ResNet 기반 - 다른 아키텍처)
2025-10-14T02:37:45.690437282Z INFO:services.hair_loss_daily.services.clip_ensemble_service:[OK] CLIP 앙상블 서비스 초기화 완료 (디바이스: cuda)
2025-10-14T02:37:45.707056910Z [ERROR] Pinecone 클라이언트 초기화 실패: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:37:45.707490785Z Traceback (most recent call last):
2025-10-14T02:37:45.707497708Z   File "/usr/local/bin/uvicorn", line 8, in <module>
2025-10-14T02:37:45.707506234Z     sys.exit(main())
2025-10-14T02:37:45.707530079Z              ^^^^^^
2025-10-14T02:37:45.707533456Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1462, in __call__
2025-10-14T02:37:45.707772500Z     return self.main(*args, **kwargs)
2025-10-14T02:37:45.707783270Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.707786426Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1383, in main
2025-10-14T02:37:45.707984823Z     rv = self.invoke(ctx)
2025-10-14T02:37:45.707992398Z          ^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.707995664Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 1246, in invoke
2025-10-14T02:37:45.708162651Z     return ctx.invoke(self.callback, **ctx.params)
2025-10-14T02:37:45.708170025Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.708173131Z   File "/usr/local/lib/python3.11/site-packages/click/core.py", line 814, in invoke
2025-10-14T02:37:45.708252321Z     return callback(*args, **kwargs)
2025-10-14T02:37:45.708255407Z            ^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.708270175Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 423, in main
2025-10-14T02:37:45.708375085Z     run(
2025-10-14T02:37:45.708378702Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/main.py", line 593, in run
2025-10-14T02:37:45.708448033Z     server.run()
2025-10-14T02:37:45.708450969Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 67, in run
2025-10-14T02:37:45.708503158Z     return asyncio_run(self.serve(sockets=sockets), loop_factory=self.config.get_loop_factory())
2025-10-14T02:37:45.708568282Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.708585204Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/_compat.py", line 23, in asyncio_run
2025-10-14T02:37:45.708592538Z     return runner.run(main)
2025-10-14T02:37:45.708595473Z            ^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.708597918Z   File "/usr/local/lib/python3.11/asyncio/runners.py", line 118, in run
2025-10-14T02:37:45.708644417Z     return self._loop.run_until_complete(task)
2025-10-14T02:37:45.708663032Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.708668362Z   File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
2025-10-14T02:37:45.708761769Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 71, in serve
2025-10-14T02:37:45.708812716Z     await self._serve(sockets)
2025-10-14T02:37:45.708819679Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/server.py", line 78, in _serve
2025-10-14T02:37:45.708867160Z     config.load()
2025-10-14T02:37:45.708882790Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/config.py", line 438, in load
2025-10-14T02:37:45.708964254Z     self.loaded_app = import_from_string(self.app)
2025-10-14T02:37:45.708981156Z                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.708983862Z   File "/usr/local/lib/python3.11/site-packages/uvicorn/importer.py", line 19, in import_from_string
2025-10-14T02:37:45.709020481Z     module = importlib.import_module(module_str)
2025-10-14T02:37:45.709036441Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.709039327Z   File "/usr/local/lib/python3.11/importlib/__init__.py", line 126, in import_module
2025-10-14T02:37:45.709087769Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-10-14T02:37:45.709108809Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.709111564Z   File "<frozen importlib._bootstrap>", line 1204, in _gcd_import
2025-10-14T02:37:45.709114219Z   File "<frozen importlib._bootstrap>", line 1176, in _find_and_load
2025-10-14T02:37:45.709116594Z   File "<frozen importlib._bootstrap>", line 1147, in _find_and_load_unlocked
2025-10-14T02:37:45.709119389Z   File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
2025-10-14T02:37:45.709122986Z   File "<frozen importlib._bootstrap_external>", line 940, in exec_module
2025-10-14T02:37:45.709125491Z   File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
2025-10-14T02:37:45.709134428Z   File "/app/app.py", line 822, in <module>
2025-10-14T02:37:45.709325000Z     from services.hair_loss_daily.api.hair_analysis_api import app as hair_analysis_app
2025-10-14T02:37:45.709345358Z   File "/app/services/hair_loss_daily/api/hair_analysis_api.py", line 10, in <module>
2025-10-14T02:37:45.709402637Z     from ..services.rag_service import rag_service
2025-10-14T02:37:45.709417365Z   File "/app/services/hair_loss_daily/services/rag_service.py", line 6, in <module>
2025-10-14T02:37:45.709468302Z     from .pinecone_service import pinecone_service
2025-10-14T02:37:45.709470887Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 138, in <module>
2025-10-14T02:37:45.709537734Z     pinecone_service = PineconeService()
2025-10-14T02:37:45.709551590Z                        ^^^^^^^^^^^^^^^^^
2025-10-14T02:37:45.709554315Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 20, in __init__
2025-10-14T02:37:45.709594071Z     self._initialize_client()
2025-10-14T02:37:45.709603288Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 42, in _initialize_client
2025-10-14T02:37:45.709652782Z     raise e
2025-10-14T02:37:45.709655538Z   File "/app/services/hair_loss_daily/services/pinecone_service.py", line 27, in _initialize_client
2025-10-14T02:37:45.709700754Z     raise ValueError("PINECONE_API_KEY 환경변수가 설정되지 않았습니다.")
2025-10-14T02:37:45.709722595Z ValueError: PINECONE_API_KEY 환경변수가 설정되지 않았습니다.
2025-10-14T02:37:53.648878638Z ✅ .env 파일 로드 시도: ../../.env
2025-10-14T02:37:53.648924646Z ⚠️  ELEVEN_ST_API_KEY 로드 실패 - .env 파일을 확인하세요