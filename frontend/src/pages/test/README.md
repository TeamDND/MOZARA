# 🧪 남성 탈모 AI 분석 테스트 페이지

## 개요
실제 프로덕션 서비스에 영향을 주지 않고 AI 탈모 분석 기능을 테스트할 수 있는 개발자 전용 페이지입니다.

## 접속 방법
```
http://localhost:3000/test/hair-analysis
```

## 주요 기능

### 1. 이미지 업로드 테스트
- **Top View**: 정수리 사진 (필수)
- **Side View**: 측면 사진 (남성만 필수)
- 다양한 이미지 포맷 지원 (JPG, PNG, WebP 등)
- 실시간 미리보기

### 2. 설문 데이터 커스터마이징
- 성별: 남성/여성 선택
- 나이: 자유 입력
- 가족력: 있음/없음
- 최근 탈모 증상: 있음/없음
- 스트레스 수준: 낮음/중간/높음

### 3. 상세 디버그 정보
- **소요 시간**: 분석에 걸린 정확한 시간 (초 단위)
- **분석 방법**: Swin Transformer (남성) / RAG v2 (여성)
- **타임스탬프**: 분석 실행 시간
- **이미지 정보**: 파일 크기, 해상도 등
- **설문 데이터**: 입력된 모든 설문 정보

### 4. 결과 표시
- **탈모 단계**: Stage 0-7 (남성), Stage 1-5 (여성)
- **신뢰도**: AI 분석의 확신 수준 (%)
- **설명**: 현재 탈모 상태에 대한 상세 설명
- **조언**: 맞춤형 관리 조언 목록
- **전체 JSON**: 원본 API 응답 데이터

## 사용 방법

### 단계별 가이드

1. **이미지 준비**
   ```
   - Top View: 정수리가 잘 보이는 사진
   - Side View: 측면 헤어라인이 보이는 사진 (남성)
   ```

2. **이미지 업로드**
   - "파일 선택" 버튼 클릭
   - 테스트할 이미지 선택
   - 미리보기로 확인

3. **설문 데이터 입력**
   - 드롭다운에서 원하는 옵션 선택
   - 나이는 직접 입력

4. **분석 실행**
   - "🚀 AI 분석 실행" 버튼 클릭
   - 분석 중 로딩 표시
   - 콘솔(F12)에서 상세 로그 확인 가능

5. **결과 확인**
   - 왼쪽: 디버그 정보 (JSON)
   - 오른쪽: 분석 결과 (UI)
   - 에러 발생 시 에러 메시지 표시

## 콘솔 로그

개발자 도구(F12) 콘솔에서 다음 정보를 확인할 수 있습니다:

```
🔵 [TEST] 남성 Swin Transformer 분석 시작
✅ [TEST] 분석 완료: {분석 결과}
⏱️ [TEST] 소요 시간: 21.45 초
```

또는

```
🟣 [TEST] 여성 RAG 분석 시작
✅ [TEST] 분석 완료: {분석 결과}
⏱️ [TEST] 소요 시간: 13.22 초
```

## 테스트 시나리오 예시

### 시나리오 1: 초기 단계 남성 탈모
```
- 성별: 남성
- 나이: 25
- 가족력: 없음
- 최근 탈모: 있음
- 스트레스: 중간
- 예상 결과: Stage 1-2
```

### 시나리오 2: 중기 단계 남성 탈모
```
- 성별: 남성
- 나이: 35
- 가족력: 있음
- 최근 탈모: 있음
- 스트레스: 높음
- 예상 결과: Stage 3-4
```

### 시나리오 3: 여성 탈모
```
- 성별: 여성
- 나이: 40
- 가족력: 있음
- 최근 탈모: 있음
- 스트레스: 높음
- 예상 결과: Stage 2-4
```

## 성능 벤치마크

### 예상 분석 시간
- **남성 (Swin Transformer)**: 20-25초
- **여성 (RAG v2)**: 12-16초

### 병목 구간
1. 이미지 전처리: ~2초
2. AI 모델 추론: ~18초 (남성) / ~9초 (여성)
3. 결과 후처리: ~1초

## 주의사항

⚠️ **중요**
- 이 페이지는 개발 및 테스트 전용입니다
- 실제 사용자 데이터는 기록되지 않습니다
- 프로덕션 DB에 영향을 주지 않습니다
- userId는 `undefined`로 전달됩니다

⚠️ **제한사항**
- S3 업로드 기능은 비활성화되어 있습니다
- 분석 기록이 저장되지 않습니다
- 포인트 적립이 되지 않습니다

## 디버깅 팁

### 문제: 분석이 실행되지 않음
- 백엔드 서버가 실행 중인지 확인
- 이미지가 올바르게 업로드되었는지 확인
- 콘솔에서 네트워크 에러 확인

### 문제: 분석 시간이 너무 오래 걸림
- 이미지 크기 확인 (권장: 5MB 이하)
- 네트워크 연결 상태 확인
- GPU 사용 가능 여부 확인 (백엔드)

### 문제: 에러 메시지가 표시됨
- 에러 메시지 복사
- 콘솔 로그 전체 확인
- 백엔드 로그 확인

## 파일 구조

```
frontend/src/pages/test/
├── HairAnalysisTest.tsx  # 테스트 페이지 메인 컴포넌트
└── README.md            # 이 문서
```

## API 엔드포인트

### 남성 분석 (Swin Transformer)
```
POST http://localhost:8000/hair_swin_check
- top_image: File
- side_image: File
- gender: string
- age: string
- familyHistory: string
- recentHairLoss: string
- stress: string
```

### 여성 분석 (RAG v2)
```
POST http://localhost:8000/api/hair-classification-rag/analyze-upload
- image: File
- gender: string
- age: string
- familyHistory: string
- recentHairLoss: string
- stress: string
```

## 추가 개발 아이디어

- [ ] 배치 테스트 기능 (여러 이미지 한 번에)
- [ ] 결과 비교 기능 (같은 이미지, 다른 설문)
- [ ] 성능 통계 그래프
- [ ] 테스트 히스토리 저장
- [ ] 샘플 이미지 세트 제공

## 관련 문서

- [Swin Transformer 분석 서비스](../../services/swinAnalysisService.ts)
- [RAG v2 분석 서비스](../../services/ragAnalysisService.ts)
- [백엔드 API 문서](../../../backend/python/README.md)

## 문의

버그나 개선 사항이 있다면 개발팀에 문의하세요.
